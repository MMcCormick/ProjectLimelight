(function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&(j.url=f),c.ajax(j)}return!1},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=c.attr("target"),g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),i=a('<form method="post" action="'+d+'"></form>'),j='<input name="_method" value="'+e+'" type="hidden" />';h!==b&&g!==b&&(j+='<input name="'+h+'" value="'+g+'" type="hidden" />'),f&&i.attr("target",f),i.hide().append(j).appendTo("body"),i.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){if(typeof b.handler=="function")return f=b.handler(d)}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",!1)),a.unbind("click.railsDisable")}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==b)return(d.metaKey||d.ctrlKey)&&(!f||f==="GET")&&!g?!0:(c.handleRemote(e)===!1&&c.enableElement(e),!1);if(e.data("method"))return c.handleMethod(e),!1}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})})(jQuery),this.JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return w.reduce(d,function(c,d,f){if(0==f||(b===!0?w.last(c)!=d:!w.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1));return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(b,c){var d,e;if(b.bind===v&&v)return v.apply(b,g.call(arguments,1));if(!w.isFunction(b))throw new TypeError;return e=g.call(arguments,2),d=function(){if(this instanceof d){z.prototype=b.prototype;var a=new z,f=b.apply(a,e.concat(g.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}}.call(this),function(){var a=this,b=a.Backbone,c=Array.prototype.slice,d=Array.prototype.splice,e;typeof exports!="undefined"?e=exports:e=a.Backbone={},e.VERSION="0.9.1";var f=a._;!f&&typeof require!="undefined"&&(f=require("underscore"));var g=a.jQuery||a.Zepto||a.ender;e.setDomLibrary=function(a){g=a},e.noConflict=function(){return a.Backbone=b,this},e.emulateHTTP=!1,e.emulateJSON=!1,e.Events={on:function(a,b,c){var d;a=a.split(/\s+/);var e=this._callbacks||(this._callbacks={});while(d=a.shift()){var f=e[d]||(e[d]={}),g=f.tail||(f.tail=f.next={});g.callback=b,g.context=c,f.tail=g.next={}}return this},off:function(a,b,c){var d,e,f;if(!a)delete this._callbacks;else if(e=this._callbacks){a=a.split(/\s+/);while(d=a.shift()){f=e[d],delete e[d];if(!b||!f)continue;while((f=f.next)&&f.next){if(f.callback===b&&(!c||f.context===c))continue;this.on(d,f.callback,f.context)}}}return this},trigger:function(a){var b,d,e,f,g,h,i;if(!(e=this._callbacks))return this;h=e.all,(a=a.split(/\s+/)).push(null);while(b=a.shift()){h&&a.push({next:h.next,tail:h.tail,event:b});if(!(d=e[b]))continue;a.push({next:d.next,tail:d.tail})}i=c.call(arguments,1);while(d=a.pop()){f=d.tail,g=d.event?[d.event].concat(i):i;while((d=d.next)!==f)d.callback.apply(d.context||this,g)}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off,e.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=u(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=f.uniqueId("c");if(!this.set(a,{silent:!0}))throw new Error("Can't create an invalid model");delete this._changed,this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)},f.extend(e.Model.prototype,e.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=f.escape(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b,c){var d,g,h;f.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof e.Model&&(d=d.attributes);if(c.unset)for(g in d)d[g]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var i=this.attributes,j=this._escapedAttributes,k=this._previousAttributes||{},l=this._setting;this._changed||(this._changed={}),this._setting=!0;for(g in d){h=d[g],f.isEqual(i[g],h)||delete j[g],c.unset?delete i[g]:i[g]=h,this._changing&&!f.isEqual(this._changed[g],h)&&(this.trigger("change:"+g,this,h,c),this._moreChanges=!0),delete this._changed[g];if(!f.isEqual(k[g],h)||f.has(i,g)!=f.has(k,g))this._changed[g]=h}return l||(!c.silent&&this.hasChanged()&&this.change(c),this._setting=!1),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(f.clone(this.attributes),a)},fetch:function(a){a=a?f.clone(a):{};var b=this,c=a.success;return a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d,g;f.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c=c?f.clone(c):{},c.wait&&(g=f.clone(this.attributes));var h=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?h:c))return!1;var i=this,j=c.success;c.success=function(a,b,e){var g=i.parse(a,e);c.wait&&(g=f.extend(d||{},g));if(!i.set(g,c))return!1;j?j(i,a):i.trigger("sync",i,a,c)},c.error=e.wrapError(c.error,i,c);var k=this.isNew()?"create":"update",l=(this.sync||e.sync).call(this,k,this,c);return c.wait&&this.set(g,h),l},destroy:function(a){a=a?f.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d();a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=e.wrapError(a.error,b,a);var g=(this.sync||e.sync).call(this,"delete",this,a);return a.wait||d(),g},url:function(){var a=u(this.collection,"url")||u(this,"urlRoot")||v();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){if(this._changing||!this.hasChanged())return this;this._changing=!0,this._moreChanges=!0;for(var b in this._changed)this.trigger("change:"+b,this,this._changed[b],a);while(this._moreChanges)this._moreChanges=!1,this.trigger("change",this,a);return this._previousAttributes=f.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(a){return arguments.length?this._changed&&f.has(this._changed,a):!f.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this._changed):!1;var b,c=!1,d=this._previousAttributes;for(var e in a){if(f.isEqual(d[e],b=a[e]))continue;(c||(c={}))[e]=b}return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),e.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})},f.extend(e.Collection.prototype,e.Events,{model:e.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var c,e,g,h,i,j,k={},l={};b||(b={}),a=f.isArray(a)?a.slice():[a];for(c=0,g=a.length;c<g;c++){if(!(h=a[c]=this._prepareModel(a[c],b)))throw new Error("Can't add an invalid model to a collection");if(k[i=h.cid]||this._byCid[i]||(j=h.id)!=null&&(l[j]||this._byId[j]))throw new Error("Can't add the same model to a collection twice");k[i]=l[j]=h}for(c=0;c<g;c++)(h=a[c]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,h.id!=null&&(this._byId[h.id]=h);this.length+=g,e=b.at!=null?b.at:this.models.length,d.apply(this.models,[e,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,g=this.models.length;c<g;c++){if(!k[(h=this.models[c]).cid])continue;b.index=c,h.trigger("add",h,this,b)}return this},remove:function(a,b){var c,d,e,g;b||(b={}),a=f.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++){g=this.getByCid(a[c])||this.get(a[c]);if(!g)continue;delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g)}return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,{silent:!0,parse:b.parse}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?f.clone(a):{},a.parse===undefined&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f,g){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return f(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof e.Model)a.collection||(a.collection=this);else{var c=a;b.collection=this,a=new this.model(c,b),a._validate(a.attributes,b)||(a=!1)}return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if((a=="add"||a=="remove")&&c!=this)return;a=="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments)}});var h=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];f.each(h,function(a){e.Collection.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}}),e.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var i=/:\w+/g,j=/\*\w+/g,k=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(e.Router.prototype,e.Events,{initialize:function(){},route:function(a,b,c){return e.history||(e.history=new e.History),f.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),e.history.route(a,f.bind(function(d){var f=this._extractParameters(a,d);c&&c.apply(this,f),this.trigger.apply(this,["route:"+b].concat(f)),e.history.trigger("route",this,b,f)},this)),this},navigate:function(a,b){e.history.navigate(a,b)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(k,"\\$&").replace(i,"([^/]+)").replace(j,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),e.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")};var l=/^[#\/]/,m=/msie [\w.]+/,n=!1;f.extend(e.History.prototype,e.Events,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=window.location.hash;return a=decodeURIComponent(a),a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(l,"")},start:function(a){if(n)throw new Error("Backbone.history has already been started");this.options=f.extend({},{root:"/"},this.options,a),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,d=m.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);d&&(this.iframe=g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?g(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?g(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b,n=!0;var e=window.location,h=e.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&h&&e.hash&&(this.fragment=e.hash.replace(l,""),window.history.replaceState({},document.title,e.protocol+"//"+e.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){g(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),n=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){if(!n)return!1;if(!b||b===!0)b={trigger:b};var c=(a||"").replace(l,"");if(this.fragment==c||this.fragment==decodeURIComponent(c))return;this._hasPushState?(c.indexOf(this.options.root)!=0&&(c=this.options.root+c),
this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}}),e.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var o=/^(\S+)\s*(.*)$/,p=["model","collection","el","id","attributes","className","tagName"];f.extend(e.View.prototype,e.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&g(d).attr(b),c&&g(d).html(c),d},setElement:function(a,b){return this.$el=g(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=u(this,"events")))return;this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw new Error('Event "'+a[b]+'" does not exist');var d=b.match(o),e=d[1],g=d[2];c=f.bind(c,this),e+=".delegateEvents"+this.cid,g===""?this.$el.bind(e,c):this.$el.delegate(g,e,c)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=p.length;b<c;b++){var d=p[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(!this.el){var a=u(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}else this.setElement(this.el,!1)}});var q=function(a,b){var c=t(this,a,b);return c.extend=this.extend,c};e.Model.extend=e.Collection.extend=e.Router.extend=e.View.extend=q;var r={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=r[a],h={type:d,dataType:"json"};return c.url||(h.url=u(b,"url")||v()),!c.data&&b&&(a=="create"||a=="update")&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),e.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),e.emulateHTTP&&(d==="PUT"||d==="DELETE")&&(e.emulateJSON&&(h.data._method=d),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),h.type!=="GET"&&!e.emulateJSON&&(h.processData=!1),g.ajax(f.extend(h,c))},e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var s=function(){},t=function(a,b,c){var d;return b&&b.hasOwnProperty("constructor")?d=b.constructor:d=function(){a.apply(this,arguments)},f.extend(d,a),s.prototype=a.prototype,d.prototype=new s,b&&f.extend(d.prototype,b),c&&f.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},u=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},v=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(){window.location.hash==="#_=_"&&(window.location="/"),window.LL={Models:{},Collections:{},Views:{},Routers:{},init:function(){return this.App=new LL.Views.App,this.Header=new LL.Views.Header({model:LL.App.current_user}),this.Router=new LL.Router,Backbone.history.start({pushState:!0})}},jQuery(function(){return LL.init(),$('[rel="tooltip"]').livequery(function(){return $(this).tooltip()}),window.globalError=function(a,b){var c,d,e,f,g,h,i,j;b==null&&(b=null),console.log(a),c=$.parseJSON(a.responseText),c.flash&&createGrowl(!1,c.flash,"Error","red");switch(a.status){case 422:if(b&&c&&c.errors){b.find(".alert-error").remove(),f=$("<div/>").addClass("alert alert-error").prepend('<a class="close" data-dismiss="alert">x</a>'),j=c.errors;for(g in j){e=j[g];for(h=0,i=e.length;h<i;h++)d=e[h],f.append("<div>"+d+"</div>")}return b.find(".errors").prepend(f)}}},window.createGrowl=function(a,b,c,d){return $.gritter.add({title:c,text:b,image:!1,sticky:!1,time:8e3,class_name:"gritter-"+d,before_open:function(){},after_open:function(a){},before_close:function(a,b){},after_close:function(){}})}})}.call(this),function(){this.JST||(this.JST={}),this.JST["buttons/follow"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push(d(this.model.get("following")===!0?"Unfollow":"Follow")),b.push("\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["buttons/like"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push(d(this.model.get("liked")===!0?"Unlike":"Like")),b.push("\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<form>\n  <div class="modal-header">\n    '),this.modal&&b.push('\n      <a class="close" data-dismiss="modal">×</a>\n    '),b.push('\n    <h3>+Talk</h3>\n  </div>\n  <div class="modal-body">\n    <div class=\'errors\'></div>\n    <div class="main-content">\n      <textarea id="post-form-content" spellcheck="false" autocomplete="off" autocomplete=\'off\' name="content" placeholder="'),b.push(d(this.placeholder_text)),b.push('">'),b.push(d(this.initial_text)),b.push("</textarea>\n      <div class='preview'>\n        <input id=\"post-form-fetch-url\" type=\"text\" placeholder='Paste URL to fetch...' autocomplete='off' />\n      </div>\n      <div class='icons'>\n        <div class=\"icon ll-icon-link\" rel='tooltip' title='Add Link' data-type='Link'></div>\n        <div class=\"icon ll-icon-picture\" rel='tooltip' title='Add Picture' data-type='Picture'></div>\n        <div class=\"icon ll-icon-video\" rel='tooltip' title='Add Video' data-type='Video'></div>\n        <i class=\"cancel-preview icon icon-remove\" rel='tooltip' title='Cancel Link'></i>\n      </div>\n    </div>\n\n    <!--<div class=\"tweet_content hide\">-->\n      <!--<div class=\"head\">tweet</div>-->\n      "),b.push('\n    <!--</div>-->\n\n    <div class="mentions">\n      <div>\n        <img src=\'/assets/images/grey-square-30.jpg\' />\n        <input class=\'topic-mention\' type="text" id="post-form-mention1" spellcheck="false" autocomplete="off" name="mention1" placeholder="Add topic..." />\n        <input type="hidden" id="post-form-mention1-id" spellcheck="false" autocomplete="off" name="mention1_id" />\n      </div>\n      <div>\n        <img src=\'/assets/images/grey-square-30.jpg\' />\n        <input class=\'topic-mention\' type="text" id="post-form-mention2" spellcheck="false" autocomplete="off" name="mention2" placeholder="Add topic..." />\n        <input type="hidden" id="post-form-mention2-id" spellcheck="false" autocomplete="off" name="mention2_id" />\n      </div>\n    </div>\n\n    <!--'),b.push('-->\n      <!--<div class="connect_twitter" data-auth=\''),b.push('\'>-->\n        <!--Connect Twitter-->\n        <!--<div class="twitter-bird-small"></div>-->\n      <!--</div>-->\n    <!--'),b.push('-->\n      <!--<div class="tweet">-->\n        <!--'),b.push("-->\n        <!--tweet this-->\n      <!--</div>-->\n    <!--"),b.push('-->\n\n    <input type="hidden" id="post-form-source-url" name="source_url" />\n    <input type="hidden" id="post-form-source-name" name="source_name" />\n    <input type="hidden" id="post-form-source-vid" name="source_video_id" />\n    <input type="hidden" id="post-form-embed" name="embed_html" />\n    <input type="hidden" id="post-form-type" name="type" value="Talk" />\n    <input type="hidden" id="post-form-parent-id" name="parent_id" />\n    <input type="hidden" id="post-form-remote-image-url" name="remote_image_url" autocomplete="off" />\n    <input type="hidden" id="post-form-image-cache" name="image_cache" autocomplete="off" />\n    <div id="picture_pupB"></div>\n  </div>\n  <div class="modal-footer">\n    <input type=\'submit\' value=\'Submit Post\' class="btn btn-success" data-loading-text=\'Submitting...\' autocomplete=\'off\' />\n    '),this.modal&&b.push('\n      <span class="cancel btn">Cancel</span>\n    '),b.push("\n  </div>\n\n</form>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/post_form_preview"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;if(this.model.get("limelight_post"))b.push("\n  "),this.model.get("limelight_post").embed?(b.push('\n    <div class="media">\n      '),b.push(this.model.get("limelight_post").embed),b.push("\n    </div>\n  ")):this.model.get("limelight_post").image&&(b.push('\n    <div class="media">\n      <img src="'),b.push(d(this.model.get("limelight_post").image)),b.push('" alt="" />\n    </div>\n  ')),b.push("\n");else{b.push("\n  ");if(this.model.get("images").length>0){b.push('\n    <div class="media">\n      '),f=this.model.get("images");for(c=0,e=f.length;c<e;c++)a=f[c],b.push('\n        <img src="'),b.push(d(a.url)),b.push('" alt="" />\n      ');b.push("\n    </div>\n  ")}b.push("\n")}b.push('\n\n<div class="info">\n  '),this.model.get("limelight_post")?(b.push('\n    <div class="title">\n      <p>'),b.push(d(this.model.get("limelight_post").title)),b.push("</p>\n      <div>Originally posted to limelight "),b.push(d(this.model.get("limelight_post").created_at_pretty)),b.push(" ago</div>\n    </div>\n  ")):(b.push('\n    <textarea id="post-form-title" spellcheck="false" autocomplete="off" name="title" placeholder=\'Title...\'>'),b.push(d(this.model.get("title"))),b.push("</textarea>\n  ")),b.push('\n</div>\n<div class="switcher hide">\n  <i class="icon-chevron-left left"></i>\n  <span class="help">choose image</span>\n  <i class="icon-chevron-right right"></i>\n</div>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/response_talk"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;b.push('<img src="'),b.push(d(this.talk.get("user").get("images").cropped.medium)),b.push('">\n<p>\n  <a class="ulink" href="'),b.push(d(this.talk.get("user").get("url"))),b.push('">'),b.push(d(this.talk.get("user").get("username"))),b.push("</a>\n  "),b.push(d(this.talk.get("content"))),b.push("\n  ");if(this.talk.get("topic_mentions").length>0){b.push('\n    <span class="mentions">\n      --\n      '),f=this.talk.get("topic_mentions");for(a=0,e=f.length;a<e;a++)c=f[a],b.push('\n        <a class="tlink" data-id=\''),b.push(d(c.get("slug"))),b.push("' href=\"/"),b.push(d(c.get("slug"))),b.push('">'),b.push(d(c.get("name"))),b.push("</a>"),a+1<this.talk.get("topic_mentions").length&&b.push(d(",")),b.push("\n      ");b.push("\n    </span>\n  ")}b.push('\n\n  <span class="actions-created">\n    <span class="actions">\n      <span class="comment-form">+Comment</span>\n    </span>\n    <span class="created-at">'),b.push(d(this.talk.get("created_at_pretty"))),b.push("</span>\n  </span>\n</p>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/root_media"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;b.push("<h5>\n  "),this.post.get("primarySource")?(b.push('\n    <span class="title title-with-source">'),b.push(d(this.post.get("title"))),b.push('</span>\n    <a target="_blank" href="'),b.push(d(this.post.get("primarySource").url)),b.push('">\n      <span class="source">'),b.push(d(this.post.get("primarySource").name)),b.push("</span>\n    </a>\n  ")):(b.push('\n    <span class="title">'),b.push(d(this.post.get("title"))),b.push("</span>\n  ")),b.push("\n</h5>\n\n"),this.post.get("images")&&(b.push("\n  <div class='img'>\n    <img src='"),b.push(d(this.post.get("images").fit.medium)),b.push("' alt='' />\n\n    "),this.post.get("video")&&b.push("\n      <div class='ll-video-play'></div>\n    "),b.push("\n    <div class='bg'></div>\n  </div>\n")),b.push("\n\n");if(this.post.get("topic_mentions").length>0){b.push('\n  <div class="mentions">\n    '),f=this.post.get("topic_mentions");for(a=0,e=f.length;a<e;a++)c=f[a],b.push('\n      <a class="tlink" data-id=\''),b.push(d(c.get("slug"))),b.push("' href=\"/"),b.push(d(c.get("slug"))),b.push('">'),b.push(d(c.get("name"))),b.push("</a>"),a+1<this.post.get("topic_mentions").length&&b.push(d(",")),b.push("\n    ");b.push("\n  </div>\n")}b.push("\n\n<div class='actions'>\n  <span class='talk-form'>+Talk</span>\n</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/root_response_talk"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;b.push('<img src="'),b.push(d(this.talk.get("user").get("images").cropped.tiny)),b.push('">\n<p>\n  <a class="ulink" data-id="'),b.push(d(this.talk.get("user").get("id"))),b.push('" href="'),b.push(d(this.talk.get("user").get("url"))),b.push('">'),b.push(d(this.talk.get("user").get("username"))),b.push("</a>\n  "),b.push(d(this.talk.get("content"))),b.push('\n  <span class="response-float">\n    ');if(this.talk.get("topic_mentions").length>0){b.push('\n      <span class="mentions">\n        --\n        '),f=this.talk.get("topic_mentions");for(a=0,e=f.length;a<e;a++)c=f[a],b.push('\n          <a class="tlink" data-id=\''),b.push(d(c.get("slug"))),b.push("' href=\"/"),b.push(d(c.get("slug"))),b.push('">'),b.push(d(c.get("name"))),b.push("</a>"),a+1<this.talk.get("topic_mentions").length&&b.push(d(",")),b.push("\n        ");b.push("\n      </span>\n    ")}b.push('\n    <span class="actions">\n      <span class="comment-form">+Comment</span>\n    </span>\n  </span>\n</p>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/root_responses"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){this.talking&&(b.push("\n  <div class='talking'>"),b.push(d(this.talking)),b.push("</div>\n")),b.push("\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/root_talk"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;b.push('<div class="root-talk">\n  <img src="'),b.push(d(this.talk.get("user").get("images").cropped.tiny)),b.push('">\n  <p>\n    <a class="ulink" href="'),b.push(d(this.talk.get("user").url)),b.push('">'),b.push(d(this.talk.get("user").username)),b.push("</a>\n    "),b.push(d(this.talk.get("content"))),b.push("\n    ");if(this.talk.get("topic_mentions").length>0){b.push('\n      <span class="mentions">\n        --\n        '),f=this.talk.get("topic_mentions");for(a=0,e=f.length;a<e;a++)c=f[a],b.push('\n          <a class="tlink" href="/'),b.push(d(c.slug)),b.push('">'),b.push(d(c.name)),b.push("</a>"),a+1<this.talk.get("topic_mentions").length&&b.push(d(",")),b.push("\n        ");b.push("\n      </span>\n    ")}b.push('\n    <span class="actions">\n      <span class="comment-form">+Comment</span>\n    </span>\n  </p>\n</div>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/root_topic"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<a class="tlink top" href="/'),b.push(d(this.topic.get("slug"))),b.push("\" data-id='"),b.push(d(this.topic.get("slug"))),b.push("'>\n  <img src='"),b.push(d(this.topic.get("images").cropped.medium)),b.push("' />\n  <h5>\n    "),b.push(d(this.topic.get("name"))),b.push("\n  </h5>\n</a>\n\n<div class='actions'>\n  <span class='talk-form'>+Talk</span>\n</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,e,f;b.push('<section class="post-root">\n  <h1>\n    '),this.post.get("primarySource")?(b.push('\n      <a target="_blank" href="'),b.push(d(this.post.get("primarySource").url)),b.push('">\n        <span class="title title-with-source">'),b.push(d(this.post.get("title"))),b.push('</span>\n        <span class="source">'),b.push(d(this.post.get("primarySource").name)),b.push("</span>\n      </a>\n    ")):(b.push('\n      <span class="title">'),b.push(d(this.post.get("title"))),b.push("</span>\n    ")),b.push('\n  </h1>\n\n  <div class="actions-created">\n    <span class=\'actions\'></span>\n    <span class="created-at">\n      Originally posted by\n      <a class="ulink" href="/users/'),b.push(d(this.post.get("user").get("id"))),b.push("\" data-id='"),b.push(d(this.post.get("user").get("id"))),b.push("'>"),b.push(d(this.post.get("user").get("username"))),b.push("</a>\n      "),b.push(d(this.post.get("created_at_pretty"))),b.push("\n    </span>\n  </div>\n\n  "),this.post.get("video")?(b.push("\n    <div class='media'>\n      "),LL.App.Feed?(b.push("\n        "),b.push(this.post.get("video_autoplay")),b.push("\n      ")):(b.push("\n        "),b.push(this.post.get("video")),b.push("\n      ")),b.push("\n    </div>\n  ")):this.post.get("images")&&(b.push("\n    <div class='media'>\n      <img src='"),b.push(d(this.post.get("images").fit.large)),b.push("' />\n    </div>\n  ")),b.push("\n\n  ");if(this.post.get("topic_mentions").length>0){b.push('\n    <div class="existing-mentions">\n      <h3>Topics</h3>\n      '),f=this.post.get("topic_mentions");for(c=0,e=f.length;c<e;c++)a=f[c],b.push('\n        <a class="tlink" href="/'),b.push(d(a.slug)),b.push("\">\n          <img src='"),b.push(d(a.get("images").cropped.medium)),b.push("' />\n          <h5>\n            "),b.push(d(a.get("name"))),b.push("\n          </h5>\n        </a>\n      ");b.push("\n    </div>\n  ")}b.push("\n  <div class='talk'></div>\n  <div class=\"c\"></div>\n\n</section>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST.static_sidebar=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<section>\n  <ul class='menu unstyled'>\n    <li>\n      <a class='first "),this.page==="about"&&b.push(d("on")),b.push('\' href="/pages/about">\n        About<i class="icon icon-chevron-right"></i>\n      </a>\n    </li>\n    <li>\n      <a class=\''),this.page==="contact"&&b.push(d("on")),b.push('\' href="/pages/contact">\n        Contact<i class="icon icon-chevron-right"></i>\n      </a>\n    </li>\n    <li>\n      <a class=\''),this.page==="help"&&b.push(d("on")),b.push('\' href="/pages/help">\n        Help<i class="icon icon-chevron-right"></i>\n      </a>\n    </li>\n    <li>\n      <a class=\''),this.page==="privacy"&&b.push(d("on")),b.push('\' href="/pages/privacy">\n        Privacy<i class="icon icon-chevron-right"></i>\n      </a>\n    </li>\n    <li>\n      <a class=\''),this.page==="terms"&&b.push(d("on")),b.push('\' href="/pages/terms">\n        Terms<i class="icon icon-chevron-right"></i>\n      </a>\n    </li>\n  </ul>\n</section>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["topics/hover_tab"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div class='top'>"),b.push(d(this.topic.get("name"))),b.push("</div>\n<div class='middle'>Topic Information</div>\n<div class='bottom'></div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["topics/list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<section>\n  <ul class='unstyled'></ul>\n</section>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["topics/list_item"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<a href="/topics/'),b.push(d(this.topic.get("slug"))),b.push("\" class='tlink' data-id='"),b.push(d(this.topic.get("id"))),b.push("'>\n  <img src='"),b.push(d(this.topic.get("images").cropped.medium)),b.push("' />\n  <h5>"),b.push(d(this.topic.get("name"))),b.push("</h5>\n</a>\n<div class='follow-c'></div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["topics/sidebar_nav"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<div class="topic-panel">\n  <h4>'),b.push(d(this.topic.get("name"))),b.push("</h4>\n  <div class='actions'></div>\n  <div class='img'>\n    <img src='"),b.push(d(this.topic.get("images").fit.medium)),b.push("' />\n  </div>\n</div>\n\n<p>Foo efoia seofin aseofin aseoi nfasoei nfaosien faosine f</p>\n\n<h4>Also Known As</h4>\n<ul class='unstyled'>\n  <li>Foo</li>\n  <li>Bar</li>\n</ul>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["topics/sidebar_teaser"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div>\n  "),b.push(d(this.topic.get("name"))),b.push("\n</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/activity_header"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<h2>"),b.push(d(this.user.get("username"))),b.push("'s Activity</h2>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/feed_header"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<h2>"),b.push(d(this.user.get("username"))),b.push("'s Feed</h2>\n<span class='stat'>"),b.push(d(this.user.get("following_topics_count"))),b.push(" Topic"),this.user.get("following_topics_count")!==1&&b.push(d("s")),b.push("</span>\n<span class='stat'>"),b.push(d(this.user.get("following_users_count"))),b.push(" User"),this.user.get("following_users_count")!==1&&b.push(d("s")),b.push("</span>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/header_nav"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){this.user?(b.push('\n  <div class=\'username dropdown-toggle\' data-toggle="dropdown" data-target="#header-user-nav">\n    '),b.push(d(this.user.get("username"))),b.push("\n    <i class='icon-chevron-down icon-white'></i>\n  </div>\n\n  <div class='numbers'>\n    <span class='notifications' rel=\"tooltip\" data-placement='bottom' title='"),b.push(d(this.user.get("unread_notification_count"))),b.push(" Unread Notifications'>"),b.push(d(this.user.get("unread_notification_count"))),b.push("</span>\n  </div>\n\n  <div class='profile-img'>\n    <img src='"),b.push(d(this.user.get("images").cropped.tiny)),b.push('\' />\n  </div>\n\n\n  <ul class="dropdown-menu right">\n    <li>\n      <a href="#">'),b.push(d(this.user.get("unread_notification_count"))),b.push(" Notification"),(this.user.get("unread_notification_count")===0||this.user.get("unread_notification_count")>1)&&b.push(d("s")),b.push(' </a>\n    </li>\n    <li class="divider"></li>\n    <li>\n      <a href="/">Feed</a>\n    </li>\n    <li>\n      <a href="'),b.push(d("/likes")),b.push('">Likes</a>\n    </li>\n    <li>\n      <a href="'),b.push(d("/activity")),b.push('">Activity</a>\n    </li>\n    <li>\n      <a href="/settings">Settings</a>\n    </li>\n    <li class="divider"></li>\n    <li>\n      <a href="'),b.push(d("/users/"+this.user.get("slug")+"/following/topics")),b.push('">Following '),b.push(d(this.user.get("following_topics_count"))),b.push(' Topics</a>\n    </li>\n    <li>\n      <a href="'),b.push(d("/users/"+this.user.get("slug")+"/following/users")),b.push('">Following '),b.push(d(this.user.get("following_users_count"))),b.push(' Users</a>\n    </li>\n    <li>\n      <a href="'),b.push(d("/users/"+this.user.get("slug")+"/followers")),b.push('">'),b.push(d(this.user.get("followers_count"))),b.push(' Followers</a>\n    </li>\n    <li class="divider"></li>\n    <li>\n      <a href="/users/sign_out">Logout</a>\n    </li>\n  </ul>\n')):b.push("\n  <div>Login</div>\n"),b.push("\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/hover_tab"]=function(
a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div class='top'>"),b.push(d(this.user.get("username"))),b.push("</div>\n<div class='middle'>User Information</div>\n<div class='bottom'></div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/influence_increase"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<img src="'),b.push(d(this.influence.get("topic").get("images").cropped.medium)),b.push('">\n<div class="amount">+'),b.push(d(parseInt(this.influence.get("amount")))),b.push("</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/like_header"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<h3>"),b.push(d(this.user.get("username"))),b.push("'s Likes</h3>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<section>\n  <ul class='unstyled'></ul>\n</section>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/list_item"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<a href="/users/'),b.push(d(this.user.get("slug"))),b.push("\" class='ulink' data-id='"),b.push(d(this.user.get("id"))),b.push("'>\n  <img src='"),b.push(d(this.user.get("images").cropped.small)),b.push("' />\n  <h5>"),b.push(d(this.user.get("username"))),b.push("</h5>\n</a>\n<div class='follow-c'></div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/sidebar_follow_stats"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<ul class='menu unstyled'>\n  <li>\n    <a class='first "),this.page==="user_following_topics"&&b.push(d("on")),b.push("' href=\""),b.push(d("/users/"+this.user.get("slug")+"/following/topics")),b.push('">\n      Following '),b.push(d(this.user.get("following_topics_count"))),b.push(' Topics\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n  <li>\n    <a class=\''),this.page==="user_following_users"&&b.push(d("on")),b.push("' href=\""),b.push(d("/users/"+this.user.get("slug")+"/following/users")),b.push('">\n      Following '),b.push(d(this.user.get("following_users_count"))),b.push(' Users\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n  <li>\n    <a class=\''),this.page==="user_followers"&&b.push(d("on")),b.push("' href=\""),b.push(d("/users/"+this.user.get("slug")+"/followers")),b.push('">\n      '),b.push(d(this.user.get("followers_count"))),b.push(' Followers\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n</ul>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/sidebar_nav"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<div class="user-panel">\n  <img src=\''),b.push(d(this.user.get("images").cropped.small)),b.push("' />\n  <h4>"),b.push(d(this.user.get("username"))),b.push("</h4>\n  <div class='actions'></div>\n</div>\n\n<ul class='menu unstyled'>\n  <li>\n    <a class='first "),this.page==="user_feed"&&b.push(d("on")),b.push("' href=\""),b.push(d(LL.App.current_user.get("id")===this.user.get("id")?"/":"/users/"+this.user.get("slug")+"/feed")),b.push('">\n      Feed\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n  <li>\n    <a class=\' '),this.page==="like_feed"&&b.push(d("on")),b.push("' href=\""),b.push(d(LL.App.current_user.get("id")===this.user.get("id")?"/likes":"/users/"+this.user.get("slug")+"/likes")),b.push('">\n      Likes\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n  <li>\n    <a class=\''),this.page==="activity_feed"&&b.push(d("on")),b.push("' href=\""),b.push(d(LL.App.current_user.get("id")===this.user.get("id")?"/activity":"/users/"+this.user.get("slug"))),b.push('">\n      Activity\n      <i class="icon icon-chevron-right"></i>\n    </a>\n  </li>\n</ul>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/sidebar_topic_suggestions"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<h4>Topic Suggestions</h4>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/tutorial"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div class='tutorial-head'>\n  <h3>Welcome "),b.push(d(this.user.get("username"))),b.push('!</h3>\n  <img src="/assets/images/splash-logo.png" />\n</div>\n<section>\n  <div class="modal-header">\n    <h2></h2>\n  </div>\n  <div class="modal-body"></div>\n  <div class="modal-footer">\n    <div class=\'btn btn-large btn-success next\'>Next</div>\n    <div class=\'step-count\'>\n      step <span>'),b.push(d(this.step)),b.push("</span> of 4\n    </div>\n  </div>\n</section>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/tutorial_1"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div>\n  Connecting Facebook/Twitter is not required, but it helps Limelight connect you to users you already know on those networks.\n  Also, when connected, you can post to Facebook and/or Twitter when you post to Limelight.\n</div>\n\n<div class='social-connect facebook "),this.user.get("facebook_connected")&&b.push(d("on")),b.push("'>\n  <h4>"),b.push(d(this.user.get("facebook_connected")?"Facebook Connected!":"Not Connected")),b.push('</h4>\n  <a href="'),b.push(d(this.user.get("facebook_connected")?"#":"/users/auth/facebook")),b.push("\" class='facebook'>\n    <img src=\"/assets/images/facebook-connect-button.gif\" />\n  </a>\n</div>\n\n<div class='social-connect twitter "),this.user.get("twitter_connected")&&b.push(d("on")),b.push("'>\n  <h4>"),b.push(d(this.user.get("twitter_connected")?"Twitter Connected!":"Not Connected")),b.push('</h4>\n  <a href="'),b.push(d(this.user.get("twitter_connected")?"#":"/users/auth/twitter")),b.push('" class=\'facebook\'>\n    <img src="/assets/images/twitter-connect-button.gif" />\n  </a>\n</div>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/tutorial_2"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div>\n  An important part of Limelight is following topics that interest you. A topic can be anything, and can be created\n  by anyone. Try following some popular topics below, you can always unfollow them later!\n</div>\n<br />\n<div>Please follow 3 or more topics below</div>\n\n<h4>Popular Topics</h4>\n<ul class='topic-list unstyled'></ul>\n<div class='btn load-more' data-loading-text=\"fetching topics...\" autocomplete='off'>Load More Topics</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/tutorial_3"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<h4>What do I post?</h4>\n<div>\n  You can post links to articles, videos, and pictures, or simply talk about something that interests you.\n</div>\n\n<h4>Why add topics?</h4>\n<ul class='unstyled'>\n  <li>\n    <span>-</span> Adding topics tells people what your post is about. A topic can be anything - Barack Obama, Lolcats, iPhone 5, etc.\n  </li>\n  <li>\n    <span>-</span> Your post is shown to people following you and people following the topics you added to your post.\n  </li>\n  <li>\n    <span>-</span> When people like what you post about a topic, your influence in that topic will increase.\n    As your influence in a topic grows, more people will see what you post about it.\n  </li>\n</ul>\n\n<h4>Posting Etiquette</h4>\n<ul class='unstyled'>\n  <li>\n    <span>-</span> Be nice. Be funny. Be witty, insightful, and creative.\n    Just be yourself (unless you're mean).\n    Respect the Limelight community.\n  </li>\n  <li>\n    <span>-</span> Add topics to your posts.\n  </li>\n  <li>\n    <span>-</span> Enjoy yourself. We're trying to build a happy community, welcome!\n  </li>\n</ul>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["users/tutorial_4"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<div>\n  Limelight is better with friends. <b>You</b> can help build the Limelight community in a big\n  way by sharing your invite code with your friends and your social networks!\n</div>\n\n<h4>Your Invite Code</h4>\n<div class='code'>\n  "),b.push(d(this.user.get("invite_code").code)),b.push("\n</div>\n\n<div>\n  If you have questions you can post @Marc or @Matt, or add the Limelight Feedback topic to your post.\n  Welcome to the Limelight community!\n</div>\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["widgets/score"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push("<span>"),b.push(d(this.model.scorePretty())),b.push("</span>\npts\n")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["widgets/sidebar_footer"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<h4>Limelight</h4>\n<a href="/pages/about">About</a>\n<a href="/pages/contact">Contact</a>\n<a href="/pages/help">Help</a>\n<a href="/pages/privacy">Privacy</a>\n<a href="/pages/terms">Terms</a>\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["widgets/sidebar_talk"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){b.push('<h4>+Talk</h4>\n<input type="text" spellcheck="false" autocomplete="off" placeholder="'),b.push(d(this.placeholder)),b.push('" />\n')})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.App=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.Embedly=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.attributes={type:"Talk",source_url:"",source_vid:"",embed:"",parent_id:"",remove_image_url:"",image_cache:""},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.InfluenceIncrease=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.parse=function(a,b){var c;return c={topic_id:a.id,amount:a.amount,reason:a.reason},c.topic=new LL.Models.Topic(a.topic),c},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.InviteCode=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.Post=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts",c.prototype.initialize=function(){var a,b,c,d,e;this.get("user")&&this.set("user",LL.App.Users.findOrCreate(this.get("user").id,new LL.Models.User(this.get("user")))),b=[];if(this.get("topic_mentions")){e=this.get("topic_mentions");for(c=0,d=e.length;c<d;c++)a=e[c],b.push(LL.App.Topics.findOrCreate(a.slug,a))}return this.set("topic_mentions",b)},c.prototype.parse=function(a,b){return LL.App.Posts.findOrCreate(a.id,new LL.Models.Post(a))},c.prototype.scorePretty=function(){return parseInt(this.get("score"))},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.PostForm=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.attributes={type:"Talk"},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.RootPost=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.parse=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(!a.root)return null;d={public_talking:a.public_talking,personal_talking:a.personal_talking},a.root.type==="Topic"?d.root=LL.App.Topics.findOrCreate(a.root.id,a.root):d.root=LL.App.Posts.findOrCreate(a.root.id,new LL.Models.Post(a.root)),g=[],q=a.public_responses;for(i=0,m=q.length;i<m;i++)h=q[i],h=LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)),g.push(h);d.public_responses=g,f=[],r=a.personal_responses;for(j=0,n=r.length;j<n;j++)h=r[j],h=LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)),f.push(LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)));d.personal_responses=f,e=[],s=a.like_responses;for(k=0,o=s.length;k<o;k++)h=s[k],h=LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)),e.push(LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)));d.like_responses=e,c=[],t=a.activity_responses;for(l=0,p=t.length;l<p;l++)h=t[l],h=LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)),c.push(LL.App.Posts.findOrCreate(h.id,new LL.Models.Post(h)));return d.activity_responses=c,d},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.Sidebar=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.Topic=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/topics",c.prototype.initialize=function(){},c.prototype.parse=function(a,b){return LL.App.Topics.get(a.id)?null:LL.App.Topics.findOrCreate(a.id,a)},c.prototype.scorePretty=function(){return parseInt(this.get("score"))},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Models.User=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/users",c.prototype.initialize=function(){},c.prototype.parse=function(a,b){return LL.App.Users.findOrCreate(a.id,new LL.Models.User(a))},c.prototype.following=function(a){return a.constructor.name==="User"?_.include(this.get("following_users"),a.get("_id")):a.constructor.name==="Topic"?_.include(this.get("following_topics"),a.get("_id")):!1},c.prototype.scorePretty=function(){return parseInt(this.get("score"))},c}(Backbone.Model)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.Embedly=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/embed",c.prototype.model=LL.Models.Embedly,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.InfluenceIncreases=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=LL.Models.InfluenceIncrease,c.prototype.url="/api/users/influence_increases",c.prototype.findOrCreate=function(a,b){var c;return b==null&&(b=null),c=this.get(a),c?c:(b&&(c=new LL.Models.InfluenceIncrease(b),c.id=a),c||(c=new LL.Models.InfluenceIncrease,c.fetch({data:{id:a}})),this.add(c),c)},c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.InviteCodes=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/invite_codes",c.prototype.model=LL.Models.InviteCode,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.LikeFeed=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/like_feed",c.prototype.model=LL.Models.RootPost,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.PostFriendResponses=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/friend_responses",c.prototype.model=LL.Models.Post,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.PostPublicResponses=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/public_responses",c.prototype.model=LL.Models.Post,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.Posts=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=LL.Models.Post,c.prototype.findOrCreate=function(a,b){var c;return b==null&&(b=null),c=this.get(a),c?c:(c||(c=b),c||(c=new LL.Models.Post,c.fetch({data:{id:a}})),this.add(c),c)},c.prototype.parse=function(a,b){return _(a).map(function(a){switch(a.type){case"Talk":return new LL.Models.Talk(a);case"Link":return new LL.Models.Link(a);case"Picture":return new LL.Models.Picture(a);case"Video":return new LL.Models.Video(a)}})},c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.Sidebars=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=LL.Models.Sidebar,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.TopicFeed=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/topic_feed",c.prototype.model=LL.Models.RootPost,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.TopicSuggestions=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/topics/suggestions",c.prototype.model=LL.Models.Topic,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.Topics=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/topics",c.prototype.model=LL.Models.Topic,c.prototype.findOrCreate=function(a,b){var c;return b==null&&(b=null),c=this.get(a),c?c:(b&&(c=new LL.Models.Topic(b),c.id=a),c||(c=new LL.Models.Topic,c.fetch({data:{id:a}})),this.add(c),c)},c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.TopicList=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/topics/index",c.prototype.model=LL.Models.Topic,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.ActivityFeed=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/activity_feed",c.prototype.model=LL.Models.RootPost,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.UserFeed=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/posts/user_feed",c.prototype.model=LL.Models.RootPost,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.UserFollowers=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/users/followers",c.prototype.model=LL.Models.User,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.UserFollowingUsers=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url="/api/users/following_users",c.prototype.model=LL.Models.User,c}(Backbone.Collection)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Collections.Users=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=LL.Models.User,c.prototype.findOrCreate=function(a,b){var c;return b==null&&(b=null),c=this.get(a),c?c:(b&&(c=new LL.Models.User(b),c.id=a),c||(c=new LL.Models.User,c.fetch({data:{id:a}})),this.add(c),c)},c}(Backbone.Collection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.App=function(b){function d(){this.stopUserHoverTab=a(this.stopUserHoverTab,this),this.startUserHoverTab=a(this.startUserHoverTab,this),this.stopTopicHoverTab=a(this.stopTopicHoverTab,this),this.startTopicHoverTab=a(this.startTopicHoverTab,this),this.calculateSiteWidth=a(this.calculateSiteWidth,this),this.subscribe_event=a(this.subscribe_event,this),this.get_event_subscription=a(this.get_event_subscription,this),this.subscribe=a(this.subscribe,this),this.get_subscription=a(this.get_subscription,this),this.showScreen=a(this.showScreen,this),this.renderScreen=a(this.renderScreen,this),this.createSidebar=a(this.createSidebar,this),this.findSidebar=a(this.findSidebar,this),this.findScreen=a(this.findScreen,this),this.newScreen=a(this.newScreen,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$("body"),d.prototype.events={"mouseover .tlink":"startTopicHoverTab","mouseout .tlink":"stopTopicHoverTab","mouseover .ulink":"startUserHoverTab","mouseout .ulink":"stopUserHoverTab"},d.prototype.initialize=function(){var a;return a=this,this.model=new LL.Models.App,this.Feed=null,this.Users=new LL.Collections.Users,this.UserFeed=new LL.Collections.UserFeed,this.ActivityFeed=new LL.Collections
.ActivityFeed,this.LikeFeed=new LL.Collections.LikeFeed,this.Posts=new LL.Collections.Posts,this.Topics=new LL.Collections.Topics,this.TopicFeed=new LL.Collections.TopicFeed,this.TopicSuggestions=new LL.Collections.TopicSuggestions,this.Modal=new LL.Views.Modal,this.screens={},this.sidebars={},this.subscriptions={},this.event_subscriptions={},this.topic_hover_tabs={},this.user_hover_tabs={},this.current_user=$("#me").length>0?this.Users.findOrCreate($("#me").data("user").id,new LL.Models.User($("#me").data("user"))):null,$(window).resize(function(){return a.calculateSiteWidth()})},d.prototype.newScreen=function(a,b){return this.screens[""+a+"_"+b]={sidebar:null,components:[]}},d.prototype.findScreen=function(a,b){return this.screens[""+a+"_"+b]},d.prototype.findSidebar=function(a,b){return this.sidebars[""+a+"_"+b]},d.prototype.createSidebar=function(a,b,c){var d;switch(a){case"user":return d=new LL.Views.UserSidebar({model:c}),this.sidebars[""+a+"_"+b]=d;case"topic":return d=new LL.Views.TopicSidebar({model:c}),this.sidebars[""+a+"_"+b]=d}},d.prototype.renderScreen=function(a,b){var c,d,e,f,g,h;d=this.screens[""+a+"_"+b],d.sidebar&&(d.sidebar.page=a,d.sidebar.render()),g=d.components,h=[];for(e=0,f=g.length;e<f;e++)c=g[e],h.push(c.render());return h},d.prototype.showScreen=function(a,b){var c,d,e,f,g,h;d=this.screens[""+a+"_"+b],d.sidebar&&$(d.sidebar.el).show(),g=d.components,h=[];for(e=0,f=g.length;e<f;e++)c=g[e],h.push($(c.el).show());return h},d.prototype.get_subscription=function(a){return this.subscriptions[a]},d.prototype.subscribe=function(a){return this.subscriptions[a]=pusher.subscribe(a)},d.prototype.get_event_subscription=function(a,b){return this.event_subscriptions[""+a+"_"+b]},d.prototype.subscribe_event=function(a,b){return this.event_subscriptions[""+a+"_"+b]=!0},d.prototype.calculateSiteWidth=function(){var a,b;if(!($("#feed > .column").length>0))return;b=$(window).width(),b>=1235?a="four":b>=995?a="three":a="two";if(!$("body").hasClass(a))return $("body").removeClass("two three four five").addClass(a),$(".qtip").qtip("reposition"),this.trigger("rearrange_columns")},d.prototype.startTopicHoverTab=function(a){var b;return b=this,$(a.target).oneTime(1e3,"topic-hover",function(){var b,c,d;return d=LL.App.Topics.findOrCreate($(a.currentTarget).data("id")),b=new LL.Views.TopicHoverTab({model:d}),c=$(a.currentTarget).find("h1,h2,h3,h4,h5").first(),c.length===0&&(c=$(a.currentTarget)),b.setTarget(c),b.render()})},d.prototype.stopTopicHoverTab=function(a){return $(a.target).stopTime("topic-hover")},d.prototype.startUserHoverTab=function(a){var b;return b=this,$(a.target).oneTime(1e3,"user-hover",function(){var b,c,d;return d=LL.App.Users.findOrCreate($(a.currentTarget).data("id")),b=new LL.Views.UserHoverTab({model:d}),c=$(a.currentTarget).find("h1,h2,h3,h4,h5").first(),c.length===0&&(c=$(a.currentTarget)),b.setTarget(c),b.render()})},d.prototype.stopUserHoverTab=function(a){return $(a.target).stopTime("user-hover")},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.FollowButton=function(b){function d(){this.updateFollow=a(this.updateFollow,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["buttons/follow"],d.prototype.className="follow btn btn-success",d.prototype.tagName="span",d.prototype.events={click:"updateFollow"},d.prototype.initialize=function(){return this.model.get("following")||this.model.set("following",LL.App.current_user.following(this.model)),this.model.bind("change:following",this.render)},d.prototype.render=function(){return $(this.el).html(this.template({model:this.model})),this},d.prototype.updateFollow=function(){var a,b,c;if($(this.el).hasClass("disabled"))return;return b=this,a={data:{id:this.model.get("_id")},dataType:"json",beforeSend:function(){return $(b.el).addClass("disabled")},success:function(a){return b.model.set("following",!b.model.get("following"))},complete:function(){return $(b.el).removeClass("disabled")}},this.model.constructor.name==="User"?c="/api/users/follows":c="/api/topics/follows",this.model.get("following")===!0?a.type="delete":a.type="post",$.ajax(c,a)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.LikeButton=function(b){function d(){this.updateLike=a(this.updateLike,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["buttons/like"],d.prototype.className="like",d.prototype.tagName="span",d.prototype.events={click:"updateLike"},d.prototype.initialize=function(){return this.model.bind("change:liked",this.render)},d.prototype.render=function(){return $(this.el).html(this.template({model:this.model})),this},d.prototype.updateLike=function(){var a,b;if($(this.el).hasClass("disabled"))return;return b=this,a={data:{id:this.model.get("_id")},dataType:"json",beforeSend:function(){return $(b.el).addClass("disabled")},success:function(a){return b.model.set("liked",!b.model.get("liked"))},error:function(a,c,d){return $(b.el).removeClass("disabled"),globalError(a)},complete:function(){return $(b.el).removeClass("disabled")}},this.model.get("liked")===!0?a.type="delete":a.type="post",$.ajax("/api/likes",a)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.Header=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$("body header .container"),d.prototype.events={"click .talk":"loadPostForm"},d.prototype.initialize=function(){if(this.model&&this.model.get("tutorial_step")===0)return this.render()},d.prototype.render=function(){var a;return a=new LL.Views.UserHeaderNav({model:this.model}),$(this.el).append(a.render().el)},d.prototype.loadPostForm=function(){var a;return a=new LL.Views.PostForm,a.modal=!0,a.render()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.Modal=function(b){function d(){this.setActive=a(this.setActive,this),this.add=a(this.add,this),this.get=a(this.get,this),this.show=a(this.show,this),this.hide=a(this.hide,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.className="ll-modal",d.prototype.events={click:"navBack"},d.prototype.initialize=function(){var a;return a=this,this.screens={},this.activeScreen=null,this.render()},d.prototype.render=function(){return $("body").append($(this.el).hide())},d.prototype.hide=function(){return $(this.el).fadeOut(250)},d.prototype.show=function(){if(this.activeScreen)return $(this.el).fadeIn(250).html(this.activeScreen.render().el)},d.prototype.get=function(a){return this.screens[a]},d.prototype.add=function(a,b){return this.screens[a]=b,this},d.prototype.setActive=function(a){return this.activeScreen=this.get(a),this},d.prototype.navBack=function(a){if($(a.target).hasClass("ll-modal"))return history.back()},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.FeedColumn=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.tagName="ul",c.prototype.className="column unstyled",c.prototype.initialize=function(){return this.height=0},c.prototype.appendPost=function(a){return $(this.el).append(a.render().el),this.height=$(this.el).height()},c}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.RootResponseTalk=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["posts/root_response_talk"],c.prototype.tagName="div",c.prototype.className="response-talk",c.prototype.initialize=function(){},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({talk:this.model})),a=new LL.Views.LikeButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.PostForm=function(b){function d(){this.focusTalk=a(this.focusTalk,this),this.fetchEmbedly=a(this.fetchEmbedly,this),this.preFetchEmbedly=a(this.preFetchEmbedly,this),this.monitorUrl=a(this.monitorUrl,this),this.removeEmbedly=a(this.removeEmbedly,this),this.activateType=a(this.activateType,this),this.updateType=a(this.updateType,this),this.addTopic=a(this.addTopic,this),this.updateFields=a(this.updateFields,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/form"],d.prototype.id="post-form",d.prototype.events={"submit form":"createPost","click .cancel":"destroyForm","click .icons .icon:not(.cancel-preview)":"activateType","click .icons .cancel-preview":"removeEmbedly","keyup #post-form-content":"monitorUrl","paste #post-form-fetch-url":"fetchEmbedly","keyup #post-form-fetch-url":"preFetchEmbedly"},d.prototype.initialize=function(){return this.collection=new LL.Collections.Posts,this.modal=!1,this.initial_text="",this.placeholder_text="What do you want to talk about?",this.model=new LL.Models.PostForm,this.model.on("change",this.updateFields),this.model.on("change:type",this.updateType),this.embedly_collection=new LL.Collections.Embedly,this.preview=new LL.Views.PostFormPreview({collection:this.embedly_collection,post_form_model:this.model}),this.preview.post_form_model=this.model},d.prototype.render=function(){var a;return $(this.el).html(this.template({modal:this.modal,initial_text:this.initial_text,placeholder_text:this.placeholder_text})),this.preview.target=$(this.el).find("#post-form-fetch-url"),a=this,this.modal&&($(this.el).addClass("modal fade"),$(this.el).modal()),setTimeout(function(){return $(a.el).find("input.topic-mention").each(function(b,c){return $(c).soulmate({url:"/autocomplete/search",types:["topic"],minQueryLength:2,maxResults:10,allowNew:!0,selectFirst:!0,renderCallback:function(a,b,c){var d;return d=a,b.data&&b.data.type&&(d+="<div class='topic-type'>"+b.data.type+"</div>"),d},selectCallback:function(b,d,e){var f;return f=d.data?d.data.slug:"new",a.addTopic($(c),d.term,d.id,f)}})})},1200),this},d.prototype.createPost=function(a){var b,c,d,e,f,g;if(a.keyCode===13||a.keyCode===89)return;a.preventDefault(),b={},g=$(this.el).find('textarea, input[type="text"], input[type="hidden"]');for(e=0,f=g.length;e<f;e++)c=g[e],b[$(c).attr("name")]=$(c).val();return d=this,this.collection.create(b,{wait:!0,beforeSend:function(){return $(d.el).find(".btn-success").button("loading")},success:function(a){return $(d.el).find(".btn-success").button("reset"),d.destroyForm()},error:function(a,b,c){return $(d.el).find(".btn-success").button("reset"),globalError(b,$(d.el))},complete:function(){return $(d.el).find(".btn-success").button("reset")}})},d.prototype.destroyForm=function(){return $(this.el).modal("hide")},d.prototype.updateFields=function(){return $(this.el).find("#post-form-source-url").val(this.model.get("source_url")),$(this.el).find("#post-form-source-name").val(this.model.get("provider_name")),$(this.el).find("#post-form-source-vid").val(this.model.get("source_vid")),$(this.el).find("#post-form-embed").val(this.model.get("embed")),$(this.el).find("#post-form-parent-id").val(this.model.get("parent_id")),$(this.el).find("#post-form-remote-image-url").val(this.model.get("remote_image_url")),$(this.el).find("#post-form-image-cache").val(this.model.get("image_cache"))},d.prototype.addTopic=function(a,b,c,d){return a.val(b).next().val(c),a.prev().attr("src","/"+d+"/picture?h=30&w=30&m=fillcropmid")},d.prototype.updateType=function(){var a;$(this.el).find("#post-form-type").val(this.model.get("type")),$(this.el).find(".icons .icon").removeClass("on");if(this.model.get("type")==="Talk"&&!this.model.get("parent_id"))return $(this.el).find(".icons").removeClass("on").find(".cancel-preview").hide(),$(this.el).find("#post-form-fetch-url").hide().val("");$(this.el).find(".icons .cancel-preview").show();switch(this.model.get("type")){case"Link":return a=!0,$(this.el).find(".ll-icon-link").addClass("on");case"Picture":return a=!0,$(this.el).find(".ll-icon-picture").addClass("on");case"Video":return a=!0,$(this.el).find(".ll-icon-video").addClass("on")}},d.prototype.activateType=function(a){return $(this.el).find("#post-form-fetch-url:visible,.preview-data").length===0&&$(this.el).find("#post-form-fetch-url").show(),this.model.set("type",$(a.target).data("type"))},d.prototype.removeEmbedly=function(){return this.preview.cancelPreview()},d.prototype.monitorUrl=function(){},d.prototype.preFetchEmbedly=function(a){var b,c;c=/^(?=www\.)?[A-Za-z0-9_-]+\.+[A-Za-z0-9.\/%&=\?_:;-]+$/ig,b=$(a.target).val().match(c);if(b&&b.length>0)return this.embedly_collection.fetch({data:{url:b[0]}})},d.prototype.fetchEmbedly=function(){var a;return a=this,setTimeout(function(){return a.embedly_collection.fetch({data:{url:a.preview.target.val()}})},0)},d.prototype.focusTalk=function(){var a;return $(this.el).find("#post-form-content").focus(),a=$(this.el).find("#post-form-content").val(),$(this.el).find("#post-form-content").val("").val(a)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.PostFormPreview=function(b){function d(){this.rotateImageRight=a(this.rotateImageRight,this),this.rotateImageLeft=a(this.rotateImageLeft,this),this.cancelPreview=a(this.cancelPreview,this),this.setData=a(this.setData,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/post_form_preview"],d.prototype.className="preview-data",d.prototype.events={"click .switcher .left":"rotateImageLeft","click .switcher .right":"rotateImageRight"},d.prototype.initialize=function(){return this.loaded=!1,this.collection.on("reset",this.render,this)},d.prototype.render=function(){var a;return a=this.collection.first(),a?this.setData(a):this.remove(),this},d.prototype.setData=function(a){$(this.el).html(this.template({model:a})),this.loaded||($(this.el).insertAfter(this.target),$("#post-form-fetch-url").hide(),this.loaded=!0),a.get("limelight_post")?this.post_form_model.set({type:"Talk",parent_id:a.get("limelight_post").id}):this.post_form_model.set({type:a.get("type"),source_url:a.get("url"),title:a.get("title"),provider_name:a.get("provider_name")}),!a.get("limelight_post")&&a.get("type")!=="Video"&&a.get("images").length>0&&(this.post_form_model.set("remote_image_url",a.get("images")[0].url),a.get("images").length>1&&($(this.el).find(".media img:gt(0)").hide(),$(this.el).find(".switcher").show()));if(a.get("type")==="Video"){this.post_form_model.set("embed",a.get("video"));if(a.get("images").length>0)return this.post_form_model.set("remote_image_url",a.get("images")[0].url)}},d.prototype.setResponse=function(a){var b;return b=new LL.Models.Embedly,b.set({limelight_post:{id:a.get("_id"),title:a.get("title"),type:a.get("type"),embed:a.get("embed_html"),image:a.get("image"),created_at:a.get("created_at")}}),this.setData(b)},d.prototype.cancelPreview=function(){return this.post_form_model.clear(),this.post_form_model.set("type","Talk"),$(this.el).remove(),this.loaded=!1},d.prototype.rotateImageLeft=function(){var a,b;return b=$(this.el).find(".media img:visible"),a=b.prev().length?b.prev():$(this.el).find(".media img:last"),b.hide(),a.show(),this.post_form_model.set("remote_image_url",a.attr("src"))},d.prototype.rotateImageRight=function(){var a,b;return b=$(this.el).find(".media img:visible"),a=b.next().length?b.next():$(this.el).find(".media img:first"),b.hide(),a.show(),this.post_form_model.set("remote_image_url",a.attr("src"))},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.PostShow=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/show"],d.prototype.id="post-show",d.prototype.className="content-tile",d.prototype.initialize=function(){return this.friendResponsesCollection=new LL.Collections.PostFriendResponses,this.publicResponsesCollection=new LL.Collections.PostPublicResponses,this.friendResponses=new LL.Views.PostShowResponses({collection:this.friendResponsesCollection}),this.publicResponses=new LL.Views.PostShowResponses({collection:this.publicResponsesCollection}),this.publicResponses.post=this.model,this.loaded=null},d.prototype.render=function(){var a,b,c,d,e,f,g,h;$(this.el).html(this.template({post:this.model})),b=new LL.Views.LikeButton({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),c=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(c.render().el),$(this.el).append(this.friendResponses.el),$(this.el).append(this.publicResponses.el),e=new LL.Views.PostForm,e.placeholder_text="Talk about this "+this.model.get("type")+"...",$(this.el).find(".talk").html(e.render().el),a=1,h=this.model.get("topic_mentions");for(f=0,g=h.length;f<g;f++){d=h[f],e.addTopic($(e.el).find("#post-form-mention"+a),d.get("name"),d.get("_id"));if(a===2)break;a++}return e.model.set("parent_id",this.model.get("_id")),$(e.el).find(".icons").remove(),this.loaded||(this.friendResponsesCollection.fetch({data:{id:this.model.get("id")}}),this.publicResponsesCollection.fetch({data:{id:this.model.get("id")}})),this.loaded=!0,LL.App.Feed&&$(this.el).addClass("modal"),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.PostShowResponses=function(b){function d(){this.appendResponse=a(this.appendResponse,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.tagName="section",d.prototype.className="hide",d.prototype.initialize=function(){return this.collection.on("reset",this.render)},d.prototype.render=function(){var a,b,c,d;if(this.collection.models.length>0){this.collection.constructor.name==="PostFriendResponses"?$(this.el).prepend("<h2>Friends Talking</h2>"):$(this.el).prepend("<h2>Other People Talking</h2>"),d=this.collection.models;for(b=0,c=d.length;b<c;b++)a=d[b],this.appendResponse(a);$(this.el).fadeIn(200)}return this},d.prototype.appendResponse=function(a){var b;return b=new LL.Views.ResponseTalk({model:a}),$(this.el).append(b.render().el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.PostsFeed=function(b){function d(){this.appendPost=a(this.appendPost,this),this.chooseColumn=a(this.chooseColumn,this),this.arrangeColumns=a(this.arrangeColumns,this),this.rearrangeColumns=a(this.rearrangeColumns,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$("#feed"),d.prototype.initialize=function(){var a;return a=this,this.page=1,this.tiles=[],this.collection.on("reset",this.render),this.collection.on("add",this.appendPost),LL.App.on("rearrange_columns",this.rearrangeColumns),$(window).bind("scroll",function(b){return a.loadMore(b)})},d.prototype.render=function(){var a,b,c,d;if(this.collection.models.length===0)$(this.el).append("<div class='none'>There are no items in this feed</div>");else{$(this.el).remove(".none"),this.columns=[],this.minColumnHeight=0,this.arrangeColumns(),d=this.collection.models;for(b=0,c=d.length;b<c;b++)a=d[b],this.appendPost(a);LL.App.calculateSiteWidth(),this.loadMore()}return this},d.prototype.rearrangeColumns=function(){var a,b,c,d,e,f;this.columns=[],this.minColumnHeight=0,this.arrangeColumns(),e=this.tiles,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],a=this.chooseColumn(),$(a.el).append(b.el),f.push(a.height=$(a.el).height());return f},d.prototype.arrangeColumns=function(){var a,b,c,d;b=Math.floor($("#feed").width()/230),d=[];for(c=1;1<=b?c<=b:c>=b;1<=b?c++:c--)a=new LL.Views.FeedColumn,$(this.el).append(a.render().el),c===b&&$(a.el).addClass("last"),d.push(this.columns.unshift(a));return d},d.prototype.chooseColumn=function(){var a,b,c,d,e,f;c=9999999999999,f=this.columns;for(d=0,e=f.length;d<e;d++)b=f[d],b.height<=c&&(a=b,c=b.height);return a},d.prototype.appendPost=function(a){var b,c,d,e;return c=this.chooseColumn(),e=new LL.Views.RootPost({model:a}),c.appendPost(e),this.tiles.push(e),a.get("root").get("type")!=="Talk"&&(d=a.get("root").get("_id"),b=LL.App.get_subscription(d),b||(b=LL.App.subscribe(d)),LL.App.get_event_subscription(d,"new_response")||(b.bind("new_response",function(b){var c;if(a.get("root"))return c=LL.App.Posts.findOrCreate(b.id,new LL.Models.Post(b)),LL.App.current_user.get("_id")===c.get("user")._id||LL.App.current_user.following(c.get("user")._id)?a.get("personal_responses").push(c):a.get("public_responses").unshift(c),a.get("root").trigger("new_response")}),LL.App.subscribe_event(d,"new_response"))),this},d.prototype.loadMore=function(a){if(this.collection.page===this.page&&this.collection.length*this.collection.page===20*this.collection.page&&$(window).scrollTop()+$(window).height()>$(this.el).height()-$(this.el).offset().top)return this.page+=1,this.collection.fetch({add:!0,data:{id:this.collection.id,p:this.page},success:this.incrementPage})},d.prototype.incrementPage=function(a,b){return b.length>0?a.page+=1:a.page=0},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.ResponseTalk=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["posts/response_talk"],c.prototype.tagName="div",c.prototype.className="response-talk",c.prototype.initialize=function(){},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({talk:this.model})),a=new LL.Views.LikeButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.RootMedia=function(b){function d(){this.loadPostForm=a(this.loadPostForm,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/root_media"],d.prototype.tagName="div",d.prototype.className="root",d.prototype.events={"click .talk-form":"loadPostForm"},d.prototype.initialize=function(){},d.prototype.render=function(){var a,b;return $(this.el).addClass(this.model.get("type").toLowerCase()).html(this.template({post:this.model})),a=new LL.Views.LikeButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),this},d.prototype.loadPostForm=function(){var a,b,c,d,e,f;c=new LL.Views.PostForm,c.modal=!0,c.placeholder_text="Talk about this "+this.model.get("type")+"...",c.render().el,a=1,f=this.model.get("topic_mentions");for(d=0,e=f.length;d<e;d++){b=f[d],c.addTopic($(c.el).find("#post-form-mention"+a),b.name,b._id);if(a===2)break;a++}return c.preview.setResponse(this.model),$(c.el).find(".icons").remove()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.RootPost=function(b){function d(){this.renderResponses=a(this.renderResponses,this),this.postShow=a(this.postShow,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.tagName="li",d.prototype.className="tile",d.prototype.events={"click .root .img, .talking, .title":"postShow"},d.prototype.initialize=function(){return this.public_responses=null,this.personal_responses=null,this.activity_responses=null,this.like_responses=null,this.model.get("root").on("new_response",this.renderResponses)},d.prototype.render=function(){var a;if(this.model.get("root")){$(this.el).addClass(this.model.get("root").get("type").toLowerCase());switch(this.model.get("root").get("type")){case"Topic":a=new LL.Views.RootTopic({model:this.model.get("root")});break;case"Talk":a=new LL.Views.RootTalk({model:this.model.get("root")});break;default:a=new LL.Views.RootMedia({model:this.model.get("root")})}$(this.el).append(a.render().el)}return this.renderResponses(),this},d.prototype.postShow=function(){return LL.Router.navigate("posts/"+this.model.get("root").get("id"),{trigger:!0})},d.prototype.renderResponses=function(a){var b,c,d,e;return this.like_responses||(c=new LL.Views.RootResponses({model:this.model}),c.type="like",c.target=$(this.el),this.like_responses=c),this.like_responses.render(),this.activity_responses||(b=new LL.Views.RootResponses({model:this.model}),b.type="activity",b.target=$(this.el),this.activity_responses=b),this.activity_responses.render(),this.personal_responses||(d=new LL.Views.RootResponses({model:this.model}),d.type="personal",d.target=$(this.el),this.personal_responses=d),this.personal_responses.render(),this.public_responses||(e=new LL.Views.RootResponses({model:this.model}),e.type="public",e.target=$(this.el),this.public_responses=e),this.public_responses.render()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.RootResponses=function(b){function d(){this.appendResponse=a(this.appendResponse,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/root_responses"],d.prototype.tagName="div",d.prototype.className="responses",d.prototype.initialize=function(){},d.prototype.render=function(){var a,b,c,d,e,f;this.type==="personal"?(c=this.model.get("personal_responses"),a="personal-responses",this.model.get("personal_talking")===0?d=null:d="Friends Talking"):this.type==="like"?(c=this.model.get("like_responses"),a="like-responses",d=""+this.model.get("like_responses").length+" "+(this.model.get("like_responses").length>1?"Likes":"Like")):this.type==="activity"?(c=this.model.get("activity_responses"),a="activity-responses",d=""):(c=this.model.get("public_responses"),a="public-responses",this.model.get("public_talking")===0?d="":d=""+this.model.get("public_talking")+" "+(this.model.get("public_talking")>1?"People":"Person")+" Talking"),$(this.el).remove();if(c.length>0){$(this.el).addClass(a).html(this.template({talking:d}));for(e=0,f=c.length;e<f;e++)b=c[e],this.appendResponse(b);this.type==="public"?this.target.append($(this.el)):this.target.find(".root").after($(this.el))}return this},d.prototype.appendResponse=function(a){var b;return b=new LL.Views.RootResponseTalk({model:a}),$(this.el).append(b.render().el),this},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.RootTalk=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["posts/root_talk"],c.prototype.tagName="div",c.prototype.className="root talk",c.prototype.initialize=function(){},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({talk:this.model})),a=new LL.Views.LikeButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.RootTopic=function(b){function d(){this.loadPostForm=a(this.loadPostForm,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["posts/root_topic"],d.prototype.tagName="div",d.prototype.className="root topic",d.prototype.events={"click .talk-form":"loadPostForm"},d.prototype.initialize=function(){},d.prototype.render=function(){var a,b;return $(this.el).html(this.template({topic:this.model})),a=new LL.Views.FollowButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").prepend(b.render().el),this},d.prototype.loadPostForm=function(){var a;return a=new LL.Views.PostForm,a.modal=!0,a.placeholder_text="Talk about "+this.model.get("name")+"...",a.render().el,a.addTopic($(a.el).find("#post-form-mention1"),this.model.get("name"),this.model.get("_id"),this.model.get("id")),$(a.el).find(".icons").remove()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.SplashPage=function(b){function d(){this.showCheekyButtons=a(this.showCheekyButtons,this),this.showInvite=a(this.showInvite,this),this.showRegister=a(this.showRegister,this),this.showLogin=a(this.showLogin,this),this.hideAll=a(this.hideAll,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$("body"),d.prototype.events={"click .cheeky-buttons .login":"showLogin","click .cheeky-buttons .register":"showInvite","click .back":"showCheekyButtons"},d.prototype.initialize=function(){var a,b,c;return b=new LL.Views.UserLoginForm,b.splash=this,c=new LL.Views.UserRegisterForm({collection:LL.App.Users}),c.splash=this,a=new LL.Views.UserUseInviteForm,a.splash=this},d.prototype.hideAll=function(){return $(".cheeky-buttons,.invite-form,.login-form,.register-form").hide()},d.prototype.showLogin=function(){return this.hideAll(),$(".login-form").show(
)},d.prototype.showRegister=function(){return this.hideAll(),$(".register-form").show()},d.prototype.showInvite=function(){return this.hideAll(),$(".invite-form").show()},d.prototype.showCheekyButtons=function(){return this.hideAll(),$(".cheeky-buttons").show()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.StaticPageSidebar=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST.static_sidebar,d.prototype.el=$(".sidebar"),d.prototype.id="static-sidebar",d.prototype.initialize=function(){},d.prototype.render=function(){return $(this.el).html(this.template({page:this.page})),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.TopicHoverTab=function(b){function d(){this.setTarget=a(this.setTarget,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["topics/hover_tab"],d.prototype.initialize=function(){},d.prototype.render=function(){var a;return a=this,this.target.qtip({position:{my:"top left",at:"bottom left",viewport:$(window)},style:{tip:!1,classes:"ui-tooltip-shadow ui-tooltip-rounded ui-tooltip-limelight hover-tab"},show:!1,hide:{fixed:!0,delay:300,effect:function(a){return $(this).slideUp(150)}},content:{text:function(b){var c;return $(a.el).html(a.template({topic:a.model})),c=new LL.Views.FollowButton({model:a.model}),$(a.el).find(".bottom").append(c.render().el),$(a.el)}}}),this.target.qtip("show"),this},d.prototype.setTarget=function(a){return this.target=a},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.TopicList=function(b){function d(){this.appendUser=a(this.appendUser,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["topics/list"],d.prototype.tagName="div",d.prototype.className="content-tile topic-list",d.prototype.initialize=function(){return this.collection.on("reset",this.render),this.collection.on("add",this.appendUser)},d.prototype.render=function(){var a,b,c,d;$(this.el).html(this.template()),$("#feed").html(this.el),$(this.el).before("<h2>"+this.pageTitle+"</h2>");if(this.collection.models.length===0)$(this.el).find("section").append("<div class='none'>Hmm, there's nothing to show here</div>");else{d=this.collection.models;for(a=0,c=d.length;a<c;a++)b=d[a],this.appendUser(b,a%2)}return this},d.prototype.appendUser=function(a,b){var c;return c=new LL.Views.TopicListItem({model:a}),c.odd=b,$(this.el).find("ul").append(c.render().el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.TopicListItem=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["topics/list_item"],d.prototype.tagName="li",d.prototype.initialize=function(){},d.prototype.render=function(){var a,b;return this.odd&&$(this.el).addClass("odd"),$(this.el).append(this.template({topic:this.model})),a=new LL.Views.FollowButton({model:this.model}),$(this.el).find(".follow-c").html(a.render().el),b=new LL.Views.Score({model:this.model}),$(this.el).append(b.render().el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.TopicSidebar=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$(".sidebar"),d.prototype.id="topic-sidebar",d.prototype.initialize=function(){},d.prototype.render=function(){var a,b;return b=new LL.Views.TopicSidebarTalk({model:this.model}),$(this.el).append(b.render().el),a=new LL.Views.TopicSidebarNav({model:this.model}),$(this.el).append(a.render().el),this},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.TopicSidebarNav=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["topics/sidebar_nav"],c.prototype.tagName="section",c.prototype.initialize=function(){},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({topic:this.model})),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").append(b.render().el),a=new LL.Views.FollowButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.TopicSidebarTalk=function(b){function d(){this.loadPostForm=a(this.loadPostForm,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["widgets/sidebar_talk"],d.prototype.tagName="section",d.prototype.className="sidebar-talk-form",d.prototype.events={"click input":"loadPostForm"},d.prototype.initialize=function(){},d.prototype.render=function(){var a;return a="Talk about "+this.model.get("name")+"!",$(this.el).html(this.template({user:this.model,placeholder:a})),this},d.prototype.loadPostForm=function(){var a;return a=new LL.Views.PostForm,a.modal=!0,a.placeholder_text="Talk about "+this.model.get("name")+"...",a.render().el,a.addTopic($(a.el).find("#post-form-mention1"),this.model.get("name"),this.model.get("_id"),this.model.get("id")),setTimeout(function(){return a.focusTalk()},500)},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.TopicSidebarTeaser=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["topics/sidebar_teaser"],c.prototype.initialize=function(){},c.prototype.render=function(){return $(this.el).html(this.template({topic:this.model})),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.InfluenceIncrease=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/influence_increase"],d.prototype.tagName="li",d.prototype.initialize=function(){},d.prototype.render=function(){return $(this.el).html(this.template({influence:this.model})).hide(),$(this.el).attr({rel:"tooltip","data-placement":"bottom",title:this.model.get("reason")}),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.InfluenceIncreases=function(b){function d(){this.prependInfluence=a(this.prependInfluence,this),this.appendInfluence=a(this.appendInfluence,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.id="influence-increases",d.prototype.tagName="ul",d.prototype.className="unstyled",d.prototype.initialize=function(){return this.collection.on("reset",this.render)},d.prototype.render=function(){var a,b,c,d,e,f;c=this,this.collection.models.length===0&&$(this.el).html('<li class="none">This bar updates as you gain influence in topics</li>'),f=this.collection.models;for(d=0,e=f.length;d<e;d++)b=f[d],this.appendInfluence(b);return a=LL.App.get_subscription(this.model.get("_id")),a||(a=LL.App.subscribe(this.model.get("_id"))),LL.App.get_event_subscription(this.model.get("_id"),"influence_change")||(a.bind("influence_change",function(a){return b=c.collection.findOrCreate(a.id,a),b.set("topic",LL.App.Topics.findOrCreate(b.get("topic").id,b.get("topic"))),c.prependInfluence(b)}),LL.App.subscribe_event(this.model.get("_id"),"influence_change")),this},d.prototype.appendInfluence=function(a){var b;return b=new LL.Views.InfluenceIncrease({model:a}),$(this.el).find(".none").remove(),$(this.el).append($(b.render().el).fadeIn(500))},d.prototype.prependInfluence=function(a){var b;return b=new LL.Views.InfluenceIncrease({model:a}),$(this.el).find(".none").remove(),$(this.el).prepend($(b.render().el).fadeIn(500))},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserActivityHeader=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/activity_header"],d.prototype.id="user-activity-header",d.prototype.className="feed-header",d.prototype.initialize=function(){return $("#user-activity-header").remove()},d.prototype.render=function(){var a,b;return $(this.el).html(this.template({user:this.model})),$("#feed").prepend($(this.el)),b=new LL.Collections.InfluenceIncreases,a=new LL.Views.InfluenceIncreases({collection:b,model:this.model}),b.fetch({data:{id:this.model.get("slug")}}),$("#feed").append(a.el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserFeedHeader=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/feed_header"],d.prototype.id="user-feed-header",d.prototype.className="feed-header",d.prototype.initialize=function(){return $("#user-feed-header").remove()},d.prototype.render=function(){var a,b;return $(this.el).html(this.template({user:this.model})),$("#feed").prepend($(this.el)),b=new LL.Collections.InfluenceIncreases,a=new LL.Views.InfluenceIncreases({collection:b,model:this.model}),b.fetch({data:{id:this.model.get("slug")}}),$("#feed").append(a.el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserHeaderNav=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/header_nav"],d.prototype.id="header-user-nav",d.prototype.className="dropdown",d.prototype.initialize=function(){},d.prototype.render=function(){var a;return $(this.el).html(this.template({user:this.model})),this.model&&(a=new LL.Views.Score({model:this.model}),$(this.el).find(".numbers").append(a.render().el)),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserHoverTab=function(b){function d(){this.setTarget=a(this.setTarget,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/hover_tab"],d.prototype.initialize=function(){},d.prototype.render=function(){var a;return a=this,this.target.qtip({position:{my:"top left",at:"bottom left",viewport:$(window)},style:{tip:!1,classes:"ui-tooltip-shadow ui-tooltip-rounded ui-tooltip-limelight hover-tab"},show:!1,hide:{fixed:!0,delay:300,effect:function(a){return $(this).slideUp(150)}},content:{text:function(b){var c;return $(a.el).html(a.template({user:a.model})),c=new LL.Views.FollowButton({model:a.model}),$(a.el).find(".bottom").append(c.render().el),$(a.el)}}}),this.target.qtip("show"),this},d.prototype.setTarget=function(a){return this.target=a},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserLikeHeader=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/like_header"],d.prototype.el=$("#feed"),d.prototype.id="user-like-header",d.prototype.className="feed-header",d.prototype.initialize=function(){return this.model.on("change",this.render),this.loaded=null},d.prototype.render=function(){if(this.loaded)return;return this.loaded=!0,$(this.el).prepend(this.template({user:this.model})),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserList=function(b){function d(){this.appendUser=a(this.appendUser,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/list"],d.prototype.tagName="div",d.prototype.className="content-tile user-list",d.prototype.initialize=function(){return this.collection.on("reset",this.render),this.collection.on("add",this.appendUser)},d.prototype.render=function(){var a,b,c,d;$(this.el).html(this.template()),$("#feed").html(this.el),$(this.el).before("<h2>"+this.pageTitle+"</h2>");if(this.collection.models.length===0)$(this.el).find("section").append("<div class='none'>Hmm, there's nothing to show here</div>");else{d=this.collection.models;for(a=0,c=d.length;a<c;a++)b=d[a],this.appendUser(b,a%2)}return this},d.prototype.appendUser=function(a,b){var c;return c=new LL.Views.UserListItem({model:a}),c.odd=b,$(this.el).find("ul").append(c.render().el),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserListItem=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/list_item"],d.prototype.tagName="li",d.prototype.initialize=function(){},d.prototype.render=function(){var a,b;return this.odd&&$(this.el).addClass("odd"),$(this.el).append(this.template({user:this.model})),LL.App.current_user!==this.model&&(a=new LL.Views.FollowButton({model:this.model}),$(this.el).find(".follow-c").html(a.render().el)),b=new LL.Views.Score({model:this.model}),$(this.el).append(b.render().el),this},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserLoginForm=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.el=$(".login-form form"),c.prototype.initialize=function(){},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserRegisterForm=function(b){function d(){this.registerUser=a(this.registerUser,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$(".register-form form"),d.prototype.events={submit:"registerUser"},d.prototype.initialize=function(){},d.prototype.registerUser=function(a){var b,c,d,e,f,g;a.preventDefault(),b={},g=$(this.el).find('input[type="text"],input[type="hidden"],input[type="email"],input[type="password"]');for(e=0,f=g.length;e<f;e++)c=g[e],b[$(c).attr("name")]=$(c).val();return d=this,this.collection.create(b,{wait:!0,beforeSend:function(){return $(d.el).find(".btn-success").button("loading")},success:function(a){return $(d.el).find(".btn-success").button("reset"),$(".register-form").replaceWith("<h4>Thanks for registering! Only one step left. Please check your email for the confirmation link.</h4>")},error:function(a,b,c){return $(d.el).find(".btn-success").button("reset"),globalError(b,$(d.el))},complete:function(){return $(d.el).find(".btn-success").button("reset")}})},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserSidebar=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$(".sidebar"),d.prototype.id="user-sidebar",d.prototype.initialize=function(){},d.prototype.render=function(){var a,b,c,d,e;return d=new LL.Views.UserSidebarTalk({model:this.model}),$(this.el).append(d.render().el),c=new LL.Views.UserSidebarNav({model:this.model}),c.page=this.page,$(this.el).append(c.render().el),a=new LL.Views.UserSidebarFollowStats({model:this.model}),a.page=this.page,$(this.el).append(a.render().el),LL.App.current_user===this.model&&(e=new LL.Views.UserSidebarTopicSuggestions({model:this.model}),$(this.el).append(e.el),LL.App.TopicSuggestions.fetch({data:{id:this.model.id}})),b=new LL.Views.SidebarFooter,$(this.el).append(b.render().el),this},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserSidebarFollowStats=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["users/sidebar_follow_stats"],c.prototype.tagName="section",c.prototype.initialize=function(){},c.prototype.render=function(){return $(this.el).html(this.template({user:this.model,page:this.page})),this},c}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserSidebarNav=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["users/sidebar_nav"],c.prototype.tagName="section",c.prototype.initialize=function(){},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({user:this.model,page:this.page})),b=new LL.Views.Score({model:this.model}),$(this.el).find(".actions").append(b.render().el),LL.App.current_user!==this.model&&(a=new LL.Views.FollowButton({model:this.model}),$(this.el).find(".actions").prepend(a.render().el)),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserSidebarTalk=function(b){function d(){this.loadPostForm=a(this.loadPostForm,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["widgets/sidebar_talk"],d.prototype.tagName="section",d.prototype.className="sidebar-talk-form",d.prototype.events={"click input":"loadPostForm"},d.prototype.initialize=function(){},d.prototype.render=function(){var a;return a=LL.App.current_user===this.model?"Talk about something!":"Talk with @"+this.model.get("username")+"!",$(this.el).html(this.template({user:this.model,placeholder:a})),this},d.prototype.loadPostForm=function(){var a;return a=new LL.Views.PostForm,a.modal=!0,LL.App.current_user!==this.model&&(a.initial_text="@"+this.model.get("username")+" "),a.render(),setTimeout(function(){return a.focusTalk()},500)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserSidebarTopicSuggestions=function(b){function d(){this.appendSuggestion=a(this.appendSuggestion,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/sidebar_topic_suggestions"],d.prototype.tagName="section",d.prototype.initialize=function(){return LL.App.TopicSuggestions.on("reset",this.render,this)},d.prototype.render=function(){var a,b,c,d,e;$(this.el).html(this.template()),a=0,e=LL.App.TopicSuggestions.models;for(c=0,d=e.length;c<d;c++)b=e[c],a<3&&(this.appendSuggestion(b),a++);return this},d.prototype.appendSuggestion=function(a){var b;return b=new LL.Views.TopicSidebarTeaser({model:a}),$(this.el).append(b.render().el)},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserTutorial=function(b){function d(){this.displayNext=a(this.displayNext,this),this.displayActive=a(this.displayActive,this),this.updateFollowCount=a(this.updateFollowCount,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/tutorial"],d.prototype.className="content-tile",d.prototype.id="tutorial",d.prototype.events={"click .next":"displayNext","click .follow":"updateFollowCount"},d.prototype.initialize=function(){return this.followCount=0},d.prototype.render=function(){var a,b;return $(this.el).html(this.template({user:this.model,step:this.step})),b=new LL.Views["UserTutorial"+this.step]({model:LL.App.current_user}),b.parent=this,this.activeView=b,this.displayActive(),this.step<4&&(a=new LL.Views["UserTutorial"+(this.step+1)]({model:LL.App.current_user}),a.parent=this,this.nextView=a),this},d.prototype.updateFollowCount=function(){var a;if(this.step!==2)return;return a=this,setTimeout(function(){return a.activeView.followCount=$('.follow:contains("Unfollow")').length,a.activeView.followCount>=3?$(a.el).find(".next").removeClass("disabled").text("Next"):$(a.el).find(".next").addClass("disabled").text("Follow 3 Topics First")},1e3)},d.prototype.displayActive=function(){var a;a=this,$(this.el).find("h2").fadeOut(300,function(){return $(this).text(a.activeView.title).fadeIn(300)}),$(this.el).find(".modal-body").fadeOut(300,function(){return $(this).html(a.activeView.render().el).fadeIn(300)}),$(this.el).find(".step-count span").text(this.step),this.step===2&&this.followCount<3&&$(".follow").length>0&&$(this.el).find(".next").addClass("disabled").text("Follow 3 Topics First"),$("body").scrollTop(0);if(this.step===4)return setTimeout(function(){return $(".next").text("Finish!")},400)},d.prototype.displayNext=function(){var a;if($(this.el).find(".next").hasClass("disabled")&&this.followCount<3){switch(this.step){case 2:createGrowl(!1,"Please follow at least 3 topics before moving on","Woops","red")}return}return this.step<4?(this.step+=1,$.ajax({url:"/api/users",type:"put",dataType:"json",data:{tutorial_step:this.step},beforeSend:function(){return $(".next").addClass("disabled")},complete:function(){return $(".next").removeClass("disabled")}}),this.activeView=this.nextView,this.displayActive(),this.step<4?(a=new LL.Views["UserTutorial"+(this.step+1)]({model:LL.App.current_user}),a.parent=this,this.nextView=a):$(".next").text("Finish!")):$.ajax({url:"/api/users",type:"put",dataType:"json",data:{tutorial_step:0},complete:function(){return window.location="/"}})},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserTutorial1=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["users/tutorial_1"],c.prototype.className="tutorial-section",c.prototype.id="tutorial-1",c.prototype.initialize=function(){return this.title="Connect Existing Social Networks"},c.prototype.render=function(){return $(this.el).html(this.template({user:this.model})),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserTutorial2=function(b){function d(){this.loadMore=a(this.loadMore,this),this.fetchTopics=a(this.fetchTopics,this),this.appendTopic=a(this.appendTopic,this),this.appendTopics=a(this.appendTopics,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["users/tutorial_2"],d.prototype.className="tutorial-section",d.prototype.id="tutorial-2",d.prototype.events={"click .tlink":"cancelClick","click .load-more":"loadMore"},d.prototype.initialize=function(){return this.title="Following Topics",this.topics=new LL.Collections.TopicList,this.topics.on("reset",this.appendTopics),this.topics.on("add",this.appendTopic),this.count=0,this.page=1,this.fetchTopics(),this.loaded=!1},d.prototype.render=function(){return $(this.el).html(this.template({user:this.model})),this.target=$(this.el).find(".topic-list"),this.appendTopics(),this.parent.updateFollowCount(),this},d.prototype.appendTopics=function(){var a,b,c,d,e;d=this.topics.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.appendTopic(a));return e},d.prototype.appendTopic=function(a){var b;$(".load-more").button("reset"),this.odd=this.count%2,this.count+=1,b=new LL.Views.TopicListItem({model:a}),b.odd=this.odd;if(this.target)return this.target.append(b.render().el)},d.prototype.cancelClick=function(a){return a.preventDefault()},d.prototype.fetchTopics=function(){return this.topics.fetch({data:{sort:["score","desc"],limit:10,page:this.page}})},d.prototype.loadMore=function(a){return $(".load-more").button("loading"),this.page+=1,this.fetchTopics()},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserTutorial3=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["users/tutorial_3"],c.prototype.className="tutorial-section",c.prototype.id="tutorial-3",c.prototype.initialize=function(){return this.title="Posting on Limelight"},c.prototype.render=function(){return $(this.el).html(this.template({user:this.model})),this},c}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Views.UserTutorial4=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["users/tutorial_4"],c.prototype.className="tutorial-section",c.prototype.id="tutorial-4",c.prototype.initialize=function(){return this.title="Invite Friends!"},c.prototype.render=function(){return $(this.el).html(this.template({user:this.model})),this},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserTutorialTips=function(b){function d(){this.nextTip=a(this.nextTip,this),this.renderTip=a(this.renderTip,this),this.tutorial13=a(this.tutorial13,this),this.tutorial12=a(this.tutorial12,this),this.tutorial11=a(this.tutorial11,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.initialize=function(){var a;return a=this,$(".tutorial-tip .next").live("click",function(){return a.nextTip()})},d.prototype.render=function(){var a;switch(this.page){case"user_feed":this.step=this.model.get("tutorial1_step")}if(this.step===0)return;return a=this,setTimeout(function(){return a.renderTip()},2e3),this},d.prototype.tutorial11=function(){return this.target=$(".navbar .talk"),this.title="Speak Your Mind",this.my="top center",this.at="bottom center",this.tip=!0,this.button="Next",this.content="      Click this button to talk about whatever videos, articles, pictures, or topics interest you.      <br /><br />      Add topics to your posts to reach more people and gain influence in those topics!    "},d.prototype.tutorial12=function(){return this.target=$("#influence-increases"),this.title="Topic Influence",this.my="top left",this.at="bottom left",this.tip=!0,this.button="Next",this.content="      This bar is a realtime view of the topic influence you're gaining as people like what you post.      <br /><br />      More topic influence means that more people will see what you post about that topic.    "},d.prototype.tutorial13=function(){return this.target=$("#influence-increases"),this.title="Your Feed",this.my="top middle",this.at="bottom middle",this.tip=!1,this.button="Finish",this.content="      Limelight creates your feed based on the users and the topics that you're following.      <br /><br />      For each post, we show you what people you're following are saying about it, and what other users      are saying about it.    "},d.prototype.renderTip=function(){switch(this.page){case"user_feed":switch(this.step){case 1:this.tutorial11();break;case 2:this.tutorial12();break;case 3:this.tutorial13();break;default:return}break;default:return}return this.currentTip=this.target.qtip({hide:!1,position:{my:this.my,at:this.at},style:{tip:this.tip,classes:"ui-tooltip-shadow ui-tooltip-rounded ui-tooltip-limelight tutorial-tip"},content:{text:"                        <div class='top'>"+this.title+"</div>                        <div class='middle'>"+this.content+"</div>                        <div class='bottom'>                          <div class='btn next'>"+this.button+"</div>                        </div>                      "}}),$(".qtip")
.qtip("hide"),this.currentTip.qtip("show")},d.prototype.nextTip=function(){var a;switch(this.page){case"user_feed":this.step===3?this.step=0:this.step+=1,a={tutorial1_step:this.step}}return $.ajax({url:"/api/users",type:"put",dataType:"json",data:a}),this.step===0?$(".qtip").qtip("destroy"):this.renderTip()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.UserUseInviteForm=function(b){function d(){this.useInvite=a(this.useInvite,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=$(".invite-form form"),d.prototype.events={submit:"useInvite"},d.prototype.initialize=function(){},d.prototype.useInvite=function(a){var b,c;return a.preventDefault(),b=$("#invite_code_code").val(),c=this,$.ajax({url:"/api/invite_codes/check",dataType:"json",type:"POST",data:{code:b},beforeSend:function(){return $(c.el).find(".btn-success").attr("disabled","disabled")},success:function(a){return c.splash.showRegister()},error:function(a,b,d){return $(c.el).find(".btn-success").removeAttr("disabled"),globalError(a,$(c.el))},complete:function(){return $(c.el).find(".btn-success").removeAttr("disabled")}})},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.Score=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["widgets/score"],d.prototype.className="score-pts",d.prototype.tagName="span",d.prototype.initialize=function(){var a,b;b=this,a=LL.App.get_subscription(this.model.get("_id")),a||(a=LL.App.subscribe(this.model.get("_id")));if(!LL.App.get_event_subscription(this.model.get("_id"),"score_change"))return a.bind("score_change",function(a){return b.model.set("score",b.model.get("score")+a.change),b.render()}),LL.App.subscribe_event(this.model.get("_id"),"score_change")},d.prototype.render=function(){return $(this.el).html(this.template({model:this.model})),this},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};LL.Views.SidebarFooter=function(b){function d(){this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["widgets/sidebar_footer"],d.prototype.className="sidebar-footer",d.prototype.tagName="section",d.prototype.initialize=function(){},d.prototype.render=function(){return $(this.el).html(this.template()),this},d}(Backbone.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};LL.Router=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.routes={"users/:id/following/topics":"userFollowingTopics","users/:id/following/users":"userFollowingUsers","users/:id/followers":"userFollowers","users/:id/likes":"likeFeed","users/:id/feed":"userFeed","users/:id":"activityFeed","posts/:id":"postShow","pages/:name":"staticPage",activity:"activityFeed",likes:"likeFeed",":id":"topicFeed","":"userFeed"},c.prototype.initialize=function(){return this.bind("all",this._trackPageview)},c.prototype.userFeed=function(a){var b,c,d,e,f;a==null&&(a=0);if(a===0&&!LL.App.current_user){this.splashPage();return}if(LL.App.current_user&&LL.App.current_user.get("tutorial_step")!==0){this.tutorials();return}return this.hideModal(),a===0?(f=LL.App.current_user,this.showTipTutorial("user_feed")):f=LL.App.Users.findOrCreate(a,new LL.Models.User($("#this").data("this"))),LL.App.findScreen("user_feed",a)?LL.App.showScreen("user_feed",a):(d=LL.App.newScreen("user_feed",a),e=LL.App.findSidebar("user",a),e||(e=LL.App.createSidebar("user",a,f)),d.sidebar=e,c=new LL.Views.UserFeedHeader({model:f}),d.components.push(c),LL.App.renderScreen("user_feed",a),b=new LL.Views.PostsFeed({collection:LL.App.UserFeed}),LL.App.Feed=b,d.components.push(b),LL.App.UserFeed.id=a,LL.App.UserFeed.page=1,LL.App.UserFeed.fetch({data:{id:a}}))},c.prototype.activityFeed=function(a){var b,c,d,e,f;return a==null&&(a=0),this.hideModal(),a===0?f=LL.App.current_user:f=LL.App.Users.findOrCreate(a,new LL.Models.User($("#this").data("this"))),LL.App.findScreen("activity_feed",a)?LL.App.showScreen("activity_feed",a):(d=LL.App.newScreen("activity_feed",a),e=LL.App.findSidebar("user",a),e||(e=LL.App.createSidebar("user",a,f)),d.sidebar=e,c=new LL.Views.UserActivityHeader({model:f}),d.components.push(c),LL.App.renderScreen("activity_feed",a),b=new LL.Views.PostsFeed({collection:LL.App.ActivityFeed}),LL.App.Feed=b,d.components.push(b),LL.App.ActivityFeed.id=a,LL.App.ActivityFeed.page=1,LL.App.ActivityFeed.fetch({data:{id:a}}))},c.prototype.likeFeed=function(a){var b,c,d,e,f;return a==null&&(a=0),a===0?f=LL.App.current_user:f=LL.App.Users.findOrCreate(a,new LL.Models.User($("#this").data("this"))),LL.App.findScreen("like_feed",a)?LL.App.showScreen("like_feed",a):(d=LL.App.newScreen("like_feed",a),e=LL.App.findSidebar("user",a),e||(e=LL.App.createSidebar("user",a,f)),d.sidebar=e,c=new LL.Views.UserLikeHeader({model:f}),d.components.push(c),LL.App.renderScreen("like_feed",a),b=new LL.Views.PostsFeed({collection:LL.App.LikeFeed}),LL.App.Feed=b,d.components.push(b),LL.App.LikeFeed.id=a,LL.App.LikeFeed.page=1,LL.App.LikeFeed.fetch({data:{id:a}}))},c.prototype.userFollowers=function(a){var b,c,d,e,f;return f=LL.App.Users.findOrCreate(a,new LL.Models.User($("#this").data("this"))),LL.App.findScreen("user_followers",a)?LL.App.showScreen("user_followers",a):(d=LL.App.newScreen("user_followers",a),e=LL.App.findSidebar("user",a),e||(e=LL.App.createSidebar("user",a,f)),d.sidebar=e,b=new LL.Collections.UserFollowers,c=new LL.Views.UserList({collection:b,model:f}),c.pageTitle=""+f.get("username")+"'s Followers",d.components.push(c),LL.App.renderScreen("user_followers",a),b.id=a,b.page=1,b.fetch({data:{id:a}}))},c.prototype.userFollowingUsers=function(a){var b,c,d,e,f;return f=LL.App.Users.findOrCreate(a,new LL.Models.User($("#this").data("this"))),LL.App.findScreen("user_following_users",a)?LL.App.showScreen("user_following_users",a):(d=LL.App.newScreen("user_following_users",a),e=LL.App.findSidebar("user",a),e||(e=LL.App.createSidebar("user",a,f)),d.sidebar=e,b=new LL.Collections.UserFollowingUsers,c=new LL.Views.UserList({collection:b,model:f}),c.pageTitle="Users "+f.get("username")+" is Following",d.components.push(c),LL.App.renderScreen("user_following_users",a),b.id=a,b.page=1,b.fetch({data:{id:a}}))},c.prototype.tutorials=function(){var a;return a=new LL.Views.UserTutorial({model:LL.App.current_user}),a.step=LL.App.current_user.get("tutorial_step"),$(".wrapper").html(a.render().el)},c.prototype.topicFeed=function(a){var b,c,d,e;if(a[0]==="?"){this.splashPage();return}return this.hideModal(),e=LL.App.Topics.findOrCreate(a,$("#this").data("this")),LL.App.findScreen("topic_feed",a)?LL.App.showScreen("topic_feed",a):(c=LL.App.newScreen("topic_feed",a),d=LL.App.findSidebar("topic",a),d||(d=LL.App.createSidebar("topic",a,e)),c.sidebar=d,LL.App.renderScreen("topic_feed",a),b=new LL.Views.PostsFeed({collection:LL.App.TopicFeed}),LL.App.Feed=b,c.components.push(b),LL.App.TopicFeed.id=a,LL.App.TopicFeed.page=1,LL.App.TopicFeed.fetch({data:{id:a}}))},c.prototype.postShow=function(a){var b,c;return b=LL.App.Posts.findOrCreate(a,new LL.Models.Post($("#this").data("this"))),LL.App.Feed?LL.App.Modal.get(a)?LL.App.Modal.setActive(a).show():(c=new LL.Views.PostShow({model:b}),LL.App.Modal.add(a,c).setActive(a).show()):(c=new LL.Views.PostShow({model:b}),$("body").addClass("no-sidebar"),$("#feed").html(c.el)),c.render()},c.prototype._trackPageview=function(){var a;return a=Backbone.history.getFragment()},c.prototype.hideModal=function(){return LL.App.Modal.hide(),$(".modal, .content-tile").remove()},c.prototype.splashPage=function(){var a;return a=new LL.Views.SplashPage},c.prototype.showTipTutorial=function(a){var b;switch(a){case"user_feed":if(LL.App.current_user.get("tutorial1_step")!==0)return b=new LL.Views.UserTutorialTips({model:LL.App.current_user}),b.page="user_feed",b.render()}},c.prototype.staticPage=function(a){var b,c,d;c=new LL.Views.StaticPageSidebar,c.page=a,c.render();switch(a){case"about":return b="bar";case"contact":return b="bar";case"help":return d=new LL.Views.PostForm,d.placeholder_text="Suggest something!",$(".content-tile section").append(d.render().el),d.addTopic($(d.el).find("#post-form-mention1"),"Limelight Feedback","foo","limelight-feedback")}},c}(Backbone.Router)}.call(this),!function(a){a(function(){"use strict",a.support.transition=function(){var b=document.body||document.documentElement,c=b.style,d=c.transition!==undefined||c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.MsTransition!==undefined||c.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";return a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"),b}()}}()})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e=c.attr("data-target"),f,g;return e||(e=c.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype={constructor:b,setState:function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},toggle:function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")}},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype={constructor:c,close:function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),e.trigger("close"),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger("close").removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()}},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.show?c.show():(c.hoverState="in",setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show))},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.hide?c.hide():(c.hoverState="out",setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide))},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle()),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a=(a||"").toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find(".popover-title")[a.type(c)=="object"?"append":"html"](c),b.find(".popover-content > *")[a.type(d)=="object"?"append":"html"](d),b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),function(){var a,b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};a=jQuery,b=function(){function a(a){this.minLength=a,this.value="",this.lastValue="",this.emptyValues=[]}return a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(a){return this.lastValue=this.value,this.value=a},a.prototype.hasChanged=function(){return this.value!==this.lastValue},a.prototype.markEmpty=function(){return this.emptyValues.push(this.value)},a.prototype.willHaveResults=function(){return this._isValid()&&!this._isEmpty()},a.prototype._isValid=function(){return this.value.length>=this.minLength},a.prototype._isEmpty=function(){var a,b,c,d;d=this.emptyValues;for(b=0,c=d.length;b<c;b++){a=d[b];if(this.value.slice(0,a.length)===a)return!0}return!1},a}(),d=function(){function b(a,b,c,d){this.term=b,this.data=c,this.type=d,this.id=""+a+"-soulmate-suggestion",this.index=a}return b.prototype.select=function(a){return a(this.term,this.data,this.type,this.index,this.id)},b.prototype.focus=function(){return this.element().addClass("focus")},b.prototype.blur=function(){return this.element().removeClass("focus")},b.prototype.render=function(a){return'<li id="'+this.id+'" class="soulmate-suggestion">\n  '+a(this.term,this.data,this.type,this.index,this.id)+"\n</li>"},b.prototype.element=function(){return a("#"+this.id)},b}(),e=function(){function b(a,b,c){this.renderCallback=a,this.selectCallback=b,this.allowNew=c,this.focusedIndex=-1,this.suggestions=[]}return b.prototype.update=function(a,b){var c,e,f,g,h,i,j,k,l;this.suggestions=[],f=0,l=[];for(h in a){i=a[h],i=_.sortBy(i,function(a){return a.term.length});if(this.allowNew&&h==="topic"){e=!1;for(j=0,k=i.length;j<k;j++){g=i[j];if(g.data&&g.data.type)break;b.toLowerCase()===g.term.toLowerCase()&&e===!0,!e&&!!g.aliases&&g.aliases.length!==0&&(c=_.map(g.aliases,function(a){return a.toLowerCase()}),_.include(c,b.toLowerCase())&&(e=!0))}e||(this.suggestions.push(new d(f,"Create a new topic: "+b,{term:b,id:0},"create")),f+=1)}l.push(function(){var a,b,c;c=[];for(a=0,b=i.length;a<b;a++)g=i[a],this.suggestions.push(new d(f,g.term,g,h)),c.push(f+=1);return c}.call(this))}return l},b.prototype.blurAll=function(){var a,b,c,d,e;this.focusedIndex=-1,d=this.suggestions,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.blur());return e},b.prototype.render=function(){var a,b,c,d,e,f;a="";if(this.suggestions.length){c=null,f=this.suggestions;for(d=0,e=f.length;d<e;d++)b=f[d],b.type!==c&&(c!==null&&(a+=this._renderTypeEnd(c)),c=b.type,a+=this._renderTypeStart()),a+=this._renderSuggestion(b);a+=this._renderTypeEnd(c)}return a},b.prototype.count=function(){return this.suggestions.length},b.prototype.focus=function(a){if(a<this.count())return this.blurAll(),a<0?this.focusedIndex=-1:(this.suggestions[a].focus(),this.focusedIndex=a)},b.prototype.focusElement=function(b){var c;return c=parseInt(a(b).attr("id")),this.focus(c)},b.prototype.focusNext=function(){return this.focus(this.focusedIndex+1)},b.prototype.focusPrevious=function(){return this.focus(this.focusedIndex-1)},b.prototype.focusFirst=function(){return this.focus(0)},b.prototype.selectFocused=function(){if(this.focusedIndex>=0)return this.suggestions[this.focusedIndex].select(this.selectCallback)},b.prototype.allBlured=function(){return this.focusedIndex===-1},b.prototype._renderTypeStart=function(){return'<li class="soulmate-type-container">\n  <ul class="soulmate-type-suggestions">'},b.prototype._renderTypeEnd=function(a){return'  </ul>\n  <div class="soulmate-type">'+a+"</div>\n</li>"},b.prototype._renderSuggestion=function(a){return a.render(this.renderCallback)},b}(),c=function(){function d(c,d){var g,h,i,j,k,l,m,n,o,p;this.input=c,this.handleKeyup=f(this.handleKeyup,this),this.handleKeydown=f(this.handleKeydown,this),m=this,p=d.url,o=d.types,j=d.renderCallback,k=d.selectCallback,h=d.maxResults,i=d.minQueryLength,n=d.timeout,g=d.allowNew,l=d.selectFirst,this.url=p,this.types=o,this.maxResults=h,this.allowNew=g||!1,this.timeout=n||1500,this.selectFirst=l||!1,this.xhr=null,this.suggestions=new e(j,k,g),this.query=new b(i),a("ul#soulmate").length>0?this.container=a("ul#soulmate"):(this.container=a('<ul id="soulmate">').appendTo("body"),this.repositionContainer()),this.container.delegate(".soulmate-suggestion",{mouseover:function(){return m.suggestions.focusElement(this)},click:function(a){return a.preventDefault(),m.suggestions.selectFocused(),m.input.focus()}}),this.input.keydown(this.handleKeydown).keyup(this.handleKeyup).mouseover(function(){return m.suggestions.blurAll()})}var c;return c={9:"tab",13:"enter",89:"enter",27:"escape",38:"up",40:"down"},d.prototype.repositionContainer=function(){return this.container.css({top:this.input.offset().top+this.input.height()+15,left:this.input.offset().left-10})},d.prototype.handleKeydown=function(a){var b;b=!0;switch(c[a.keyCode]){case"escape":this.hideContainer();break;case"tab":this.suggestions.selectFocused(),this.container.is(":visible")||(b=!1);break;case"enter":this.suggestions.selectFocused(),this.hideContainer();break;case"up":this.suggestions.focusPrevious();break;case"down":this.suggestions.focusNext();break;default:b=!1}if(b)return a.stopImmediatePropagation(),a.preventDefault()},d.prototype.handleKeyup=function(a){if(c[a.keyCode]==="enter"||c[a.keyCode]==="tab")return;this.query.setValue(this.input.val());if(this.query.hasChanged())return this.query.willHaveResults()?(this.suggestions.blurAll(),this.fetchResults()):this.hideContainer()},d.prototype.hideContainer=function(){return this.suggestions.blurAll(),this.container.hide(),a(document).unbind("click.soulmate")},d.prototype.showContainer=function(){var b=this;return this.repositionContainer(),this.container.show(),this.selectFirst&&this.suggestions.focusFirst(),a(document).bind("click.soulmate",function(c){if(!b.container.has(a(c.target)).length)return b.hideContainer()})},d.prototype.fetchResults=function(){var b=this;return this.xhr!=null&&this.xhr.abort(),this.xhr=a.ajax({url:this.url,dataType:"jsonp",timeout:this.timeout,cache:!0,data:{term:this.query.getValue(),types:this.types,limit:this.maxResults},success:function(a){return b.update(a.results)}})},d.prototype.update=function(b){return this.suggestions.update(b,this.query.getValue()),this.suggestions.count()>0?(this.container.html(a(this.suggestions.render())),this.showContainer()):(this.query.markEmpty(),this.hideContainer())},d}(),a.fn.soulmate=function(b){return new c(a(this),b),a(this)},window._test={Query:b,Suggestion:d,SuggestionCollection:e,Soulmate:c}}.call(this),function(a){a.extend(a.fn,{livequery:function(b,c,d){var e=this,f;return a.isFunction(b)&&(d=c,c=b,b=undefined),a.each(a.livequery.queries,function(a,g){if(e.selector==g.selector&&e.context==g.context&&b==g.type&&(!c||c.$lqguid==g.fn.$lqguid)&&(!d||d.$lqguid==g.fn2.$lqguid))return(f=g)&&!1}),f=f||new a.livequery(this.selector,this.context,b,c,d),f.stopped=!1,f.run(),this},expire:function(b,c,d){var e=this;return a.isFunction(b)&&(d=c,c=b,b=undefined),a.each(a.livequery.queries,function(f,g){e.selector==g.selector&&e.context==g.context&&(!b||b==g.type)&&(!c||c.$lqguid==g.fn.$lqguid)&&(!d||d.$lqguid==g.fn2.$lqguid)&&!this.stopped&&a.livequery.stop(g.id)}),this}}),a.livequery=function(b,c,d,e,f){return this.selector=b,this.context=c||document,this.type=d,this.fn=e,this.fn2=f,this.elements=[],this.stopped=!1,this.id=a.livequery.queries.push(this)-1,e.$lqguid=e.$lqguid||a.livequery.guid++,f&&(f.$lqguid=f.$lqguid||a.livequery.guid++),this},a.livequery.prototype={stop:function(){var a=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(b,c){a.fn2.apply(c)}),this.elements=[],this.stopped=!0},run:function(){if(this.stopped)return;var b=this,c=this.elements,d=a(this.selector,this.context),e=d.not(c);this.elements=d,this.type?(e.bind(this.type,this.fn),c.length>0&&a.each(c,function(c,e){a.inArray(e,d)<0&&a.event.remove(e,b.type,b.fn)})):(e.each(function(){b.fn.apply(this)}),this.fn2&&c.length>0&&a.each(c,function(c,e){a.inArray(e,d)<0&&b.fn2.apply(e)}))}},a.extend(a.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var b=a.livequery.queue.length;while(b--)a.livequery.queries[a.livequery.queue.shift()].run()}},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0,a.livequery.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(!a.fn[c])return;var d=a.fn[c];a.fn[c]=function(){var b=d.apply(this,arguments);return a.livequery.run(),b}})},run:function(b){b!=undefined?a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b):a.each(a.livequery.queries,function(b){a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b)}),a.livequery.timeout&&clearTimeout(a.livequery.timeout),a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){b!=undefined?a.livequery.queries[b].stop():a.each(a.livequery.queries,function(b){a.livequery.queries[b].stop()})}}),a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove"),a(function(){a.livequery.play()});var b=a.prototype.init;a.prototype.init=function(a,c){var d=b.apply(this,arguments);return a&&a.selector&&(d.context=a.context,d.selector=a.selector),typeof a=="string"&&(d.context=c||document,d.selector=a),d},a.prototype.init.prototype=a.prototype}(jQuery),function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function v(){v.history=v.history||[],v.history.push(arguments);if("object"==typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]=="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}function w(b){var e;if(!b||"object"!=typeof b)return c;if(b.metadata===d||"object"!=typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===d||"object"!=typeof b.content||b.content.jquery)b.content={text:b.content};e=b.content.text||c,!a.isFunction(e)&&(!e&&!e.attr||e.length<1||"object"==typeof e&&!e.jquery)&&(b.content.text=c);if("title"in b.content){if(b.content.title===d||"object"!=typeof b.content.title)b.content.title={text:b.content.title};e=b.content.title.text||c,!a.isFunction(e)&&(!e&&!e.attr||e.length<1||"object"==typeof e&&!e.jquery)&&(b.content.title.text=c)}}return"position"in b&&(b.position===d||"object"!=typeof b.position)&&(b.position={my:b.position,at:b.position}),"show"in b&&(b.show===d||"object"!=typeof b.show)&&(b.show.jquery?b.show={target:b.show}:b.show={event:b.show}),"hide"in b&&(b.hide===d||"object"!=typeof b.hide)&&(b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide}),"style"in b&&(b.style===d||"object"!=typeof b.style)&&(b.style={classes:b.style}),a.each(g,function(){this.sanitize&&this.sanitize(b)}),b}function x(r,s,v,x){function H(a){var b=0,c,d=s,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||s,e.pop()]}function I(){var a=s.style.widget;D.toggleClass(k,a).toggleClass(n,s.style.def&&!a),F.content.toggleClass(k+"-content",a),F.titlebar&&F.titlebar.toggleClass(k+"-header",a),F.button&&F.button.toggleClass(j+"-icon",!a)}function J(a){F.title&&(F.titlebar.remove(),F.titlebar=F.title=F.button=d,a!==c&&y.reposition())}function K(){var b=s.content.title.button,d=typeof b=="string",e=d?b:"Close tooltip";F.button&&F.button.remove(),b.jquery?F.button=b:F.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+(s.style.widget?"":j+"-icon"),title:e,"aria-label":e}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),F.button.appendTo(F.titlebar).attr("role","button").click(function(a){return D.hasClass(l)||y.hide(a),c}),y.redraw()}function L(){var c=A+"-title";F.titlebar&&J(),F.titlebar=a("<div />",{"class":j+"-titlebar "+(s.style.widget?"ui-widget-header":"")}).append(F.title=a("<div />",{id:c,"class":j+"-title","aria-atomic":b})).insertBefore(F.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),s.content.title.button?K():y.rendered&&y.redraw()}function M(a){var b=F.button,d=F.title;if(!y.rendered)return c;a?(d||L(),K()):b.remove()}function N(b,d){var e=F.title;if(!y.rendered||!b)return c;a.isFunction(b)&&(b=b.call(r,G.event,y));if(b===c||!b&&b!=="")return J(c);b.jquery&&b.length>0?e.empty().append(b.css({display:"block"})):e.html(b),y.redraw(),d!==c&&y.rendered&&D.is(":visible")&&y.reposition(G.event)}function O(b,d){function g(b){function i(e){e&&(delete h[e.src],clearTimeout(y.timers.img
[e.src]),a(e).unbind(E)),a.isEmptyObject(h)&&(y.redraw(),d!==c&&y.reposition(G.event),b())}var g,h={};if((g=f.find("img[src]:not([height]):not([width])")).length===0)return i();g.each(function(b,c){if(h[c.src]!==e)return;var d=0,f=3;(function g(){if(c.height||c.width||d>f)return i(c);d+=1,y.timers.img[c.src]=setTimeout(g,700)})(),a(c).bind("error"+E+" load"+E,function(){i(this)}),h[c.src]=c})}var f=F.content;return!y.rendered||!b?c:(a.isFunction(b)&&(b=b.call(r,G.event,y)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),y.rendered<0?D.queue("fx",g):(C=0,g(a.noop)),y)}function P(){function j(a){if(D.hasClass(l))return c;clearTimeout(y.timers.show),clearTimeout(y.timers.hide);var d=function(){y.toggle(b,a)};s.show.delay>0?y.timers.show=setTimeout(d,s.show.delay):d()}function k(b){if(D.hasClass(l)||B||C)return c;var f=a(b.relatedTarget||b.target),g=f.closest(m)[0]===D[0],h=f[0]===e.show[0];clearTimeout(y.timers.show),clearTimeout(y.timers.hide);if(d.target==="mouse"&&g||s.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(g||h)){try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}return}s.hide.delay>0?y.timers.hide=setTimeout(function(){y.hide(b)},s.hide.delay):y.hide(b)}function n(a){if(D.hasClass(l))return c;clearTimeout(y.timers.inactive),y.timers.inactive=setTimeout(function(){y.hide(a)},s.hide.inactive)}function o(a){D.is(":visible")&&y.reposition(a)}var d=s.position,e={show:s.show.target,hide:s.hide.target,viewport:a(d.viewport),document:a(document),body:a(document.body),window:a(window)},g={show:a.trim(""+s.show.event).split(" "),hide:a.trim(""+s.hide.event).split(" ")},i=a.browser.msie&&parseInt(a.browser.version,10)===6;D.bind("mouseenter"+E+" mouseleave"+E,function(a){var b=a.type==="mouseenter";b&&y.focus(a),D.toggleClass(p,b)}),s.hide.fixed&&(e.hide=e.hide.add(D),D.bind("mouseover"+E,function(){D.hasClass(l)||clearTimeout(y.timers.hide)})),/mouse(out|leave)/i.test(s.hide.event)?s.hide.leave==="window"&&e.window.bind("mouseout"+E+" blur"+E,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&y.hide(a)}):/mouse(over|enter)/i.test(s.show.event)&&e.hide.bind("mouseleave"+E,function(a){clearTimeout(y.timers.show)}),(""+s.hide.event).indexOf("unfocus")>-1&&d.container.closest("html").bind("mousedown"+E,function(b){var c=a(b.target),d=!D.hasClass(l)&&D.is(":visible"),e=c.parents(m).filter(D[0]).length>0;c[0]!==r[0]&&c[0]!==D[0]&&!e&&!r.has(c[0]).length&&!c.attr("disabled")&&y.hide(b)}),"number"==typeof s.hide.inactive&&(e.show.bind("qtip-"+v+"-inactive",n),a.each(f.inactiveEvents,function(a,b){e.hide.add(F.tooltip).bind(b+E+"-inactive",n)})),a.each(g.hide,function(b,c){var d=a.inArray(c,g.show),f=a(e.hide);d>-1&&f.add(e.show).length===f.length||c==="unfocus"?(e.show.bind(c+E,function(a){D.is(":visible")?k(a):j(a)}),delete g.show[d]):e.hide.bind(c+E,k)}),a.each(g.show,function(a,b){e.show.bind(b+E,j)}),"number"==typeof s.hide.distance&&e.show.add(D).bind("mousemove"+E,function(a){var b=G.origin||{},c=s.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&y.hide(a)}),d.target==="mouse"&&(e.show.bind("mousemove"+E,function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),d.adjust.mouse&&(s.hide.event&&(D.bind("mouseleave"+E,function(a){(a.relatedTarget||a.target)!==e.show[0]&&y.hide(a)}),F.target.bind("mouseenter"+E+" mouseleave"+E,function(a){G.onTarget=a.type==="mouseenter"})),e.document.bind("mousemove"+E,function(a){G.onTarget&&!D.hasClass(l)&&D.is(":visible")&&y.reposition(a||h)}))),(d.adjust.resize||e.viewport.length)&&(a.event.special.resize?e.viewport:e.window).bind("resize"+E,o),(e.viewport.length||i&&D.css("position")==="fixed")&&e.viewport.bind("scroll"+E,o)}function Q(){var b=[s.show.target[0],s.hide.target[0],y.rendered&&F.tooltip[0],s.position.container[0],s.position.viewport[0],window,document];y.rendered?a([]).pushStack(a.grep(b,function(a){return typeof a=="object"})).unbind(E):s.show.target.unbind(E+"-create")}var y=this,z=document.body,A=j+"-"+v,B=0,C=0,D=a(),E=".qtip-"+v,F,G;y.id=v,y.rendered=c,y.elements=F={target:r},y.timers={img:{}},y.options=s,y.checks={},y.plugins={},y.cache=G={event:{},target:a(),disabled:c,attr:x,onTarget:c},y.checks.builtin={"^id$":function(d,e,g){var h=g===b?f.nextid:g,i=j+"-"+h;h!==c&&h.length>0&&!a("#"+i).length&&(D[0].id=i,F.content[0].id=i+"-content",F.title[0].id=i+"-title")},"^content.text$":function(a,b,c){O(c)},"^content.title.text$":function(a,b,c){if(!c)return J();!F.title&&c&&L(),N(c)},"^content.title.button$":function(a,b,c){M(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new g.Corner(c))},"^position.container$":function(a,b,c){y.rendered&&D.appendTo(c)},"^show.ready$":function(){y.rendered?y.toggle(b):y.render(1)},"^style.classes$":function(a,b,c){D.attr("class",j+" qtip ui-helper-reset "+c)},"^style.widget|content.title":I,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){D[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=s.position;D.attr("tracking",a.target==="mouse"&&a.adjust.mouse),Q(),P()}},a.extend(y,{render:function(d){if(y.rendered)return y;var e=s.content.text,f=s.content.title.text,h=s.position,i=a.Event("tooltiprender");return a.attr(r[0],"aria-describedby",A),D=F.tooltip=a("<div/>",{id:A,"class":j+" qtip ui-helper-reset "+n+" "+s.style.classes+" "+j+"-pos-"+s.position.my.abbrev(),width:s.style.width||"",height:s.style.height||"",tracking:h.target==="mouse"&&h.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":c,"aria-describedby":A+"-content","aria-hidden":b}).toggleClass(l,G.disabled).data("qtip",y).appendTo(s.position.container).append(F.content=a("<div />",{"class":j+"-content",id:A+"-content","aria-atomic":b})),y.rendered=-1,C=1,B=1,f&&(L(),a.isFunction(f)||N(f,c)),a.isFunction(e)||O(e,c),y.rendered=b,I(),a.each(s.events,function(b,c){a.isFunction(c)&&D.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(g,function(){this.initialize==="render"&&this(y)}),P(),D.queue("fx",function(a){i.originalEvent=G.event,D.trigger(i,[y]),C=0,B=0,y.redraw(),(s.show.ready||d)&&y.toggle(b,G.event,c),a()}),y},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:D.outerHeight(),width:D.outerWidth()};break;case"offset":b=g.offset(D,s.position.container);break;default:c=H(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(e,f){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(y,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=c,j=c,k=y.checks,l;return"string"==typeof e?(l=e,e={},e[l]=f):e=a.extend(b,{},e),a.each(e,function(b,c){var d=H(b.toLowerCase()),f;f=d[0][d[1]],d[0][d[1]]="object"==typeof c&&c.nodeType?a(c):c,e[b]=[d[0],d[1],c,f],i=g.test(b)||i,j=h.test(b)||j}),w(s),B=C=1,a.each(e,m),B=C=0,D.is(":visible")&&y.rendered&&(i&&y.reposition(s.position.target==="mouse"?d:G.event),j&&y.redraw()),y},toggle:function(e,f){function q(){e?(a.browser.msie&&D[0].style.removeAttribute("filter"),D.css("overflow",""),"string"==typeof i.autofocus&&a(i.autofocus,D).focus(),p=a.Event("tooltipvisible"),p.originalEvent=f?G.event:d,D.trigger(p,[y]),i.target.trigger("qtip-"+v+"-inactive")):D.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!y.rendered)return e?y.render(1):y;var g=e?"show":"hide",i=s[g],j=D.is(":visible"),k=!f||s[g].target.length<2||G.target[0]===f.target,l=s.position,n=s.content,o,p;(typeof e).search("boolean|number")&&(e=!j);if(!D.is(":animated")&&j===e&&k)return y;if(f){if(/over|enter/.test(f.type)&&/out|leave/.test(G.event.type)&&f.target===s.show.target[0]&&D.has(f.relatedTarget).length)return y;G.event=a.extend({},f)}return p=a.Event("tooltip"+g),p.originalEvent=f?G.event:d,D.trigger(p,[y,90]),p.isDefaultPrevented()?y:(a.attr(D[0],"aria-hidden",!e),e?(G.origin=a.extend({},h),y.focus(f),a.isFunction(n.text)&&O(n.text,c),a.isFunction(n.title.text)&&N(n.title.text,c),!u&&l.target==="mouse"&&l.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),u=b),y.reposition(f,arguments[2]),(p.solo=!!i.solo)&&a(m,i.solo).not(D).qtip("hide",p)):(clearTimeout(y.timers.show),delete G.origin,u&&!a(m+'[tracking="true"]:visible',i.solo).not(D).length&&(a(document).unbind("mousemove.qtip"),u=c),y.blur(f)),k&&D.stop(0,1),i.effect===c?(D[g](),q.call(D)):a.isFunction(i.effect)?(i.effect.call(D,y),D.queue("fx",function(a){q(),a()})):D.fadeTo(90,e?1:0,q),e&&i.target.trigger("qtip-"+v+"-inactive"),y)},show:function(a){return y.toggle(b,a)},hide:function(a){return y.toggle(c,a)},focus:function(b){if(!y.rendered)return y;var c=a(m),d=parseInt(D[0].style.zIndex,10),e=f.zindex+c.length,g=a.extend({},b),h,i;return D.hasClass(o)||(i=a.Event("tooltipfocus"),i.originalEvent=g,D.trigger(i,[y,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+o).qtip("blur",g)),D.addClass(o)[0].style.zIndex=e)),y},blur:function(b){var c=a.extend({},b),d;return D.removeClass(o),d=a.Event("tooltipblur"),d.originalEvent=c,D.trigger(d,[y]),y},reposition:function(b,d){if(!y.rendered||B)return y;B=1;var e=s.position.target,f=s.position,i=f.my,k=f.at,l=f.adjust,m=l.method.split(" "),n=D.outerWidth(),o=D.outerHeight(),p=0,q=0,r=a.Event("tooltipmove"),t=D.css("position")==="fixed",u=f.viewport,v={left:0,top:0},w=f.container,x=c,A=y.plugins.tip,C={horizontal:m[0],vertical:m[1]=m[1]||m[0],enabled:u.jquery&&e[0]!==window&&e[0]!==z&&l.method!=="none",left:function(a){var b=C.horizontal==="shift",c=-w.offset.left+u.offset.left+u.scrollLeft,d=i.x==="left"?n:i.x==="right"?-n:-n/2,e=k.x==="left"?p:k.x==="right"?-p:-p/2,f=A&&A.size?A.size.width||0:0,g=A&&A.corner&&A.corner.precedance==="x"&&!b?f:0,h=c-a+g,j=a+n-u.width-c+g,m=d-(i.precedance==="x"||i.x===i.y?e:0)-(k.x==="center"?p/2:0),o=i.x==="center";return b?(g=A&&A.corner&&A.corner.precedance==="y"?f:0,m=(i.x==="left"?1:-1)*d-g,v.left+=h>0?h:j>0?-j:0,v.left=Math.max(-w.offset.left+u.offset.left+(g&&A.corner.x==="center"?A.offset:0),a-m,Math.min(Math.max(-w.offset.left+u.offset.left+u.width,a+m),v.left))):(h>0&&(i.x!=="left"||j>0)?v.left-=m:j>0&&(i.x!=="right"||h>0)&&(v.left-=o?-m:m),v.left!==a&&o&&(v.left-=l.x),v.left<c&&-v.left>j&&(v.left=a)),v.left-a},top:function(a){var b=C.vertical==="shift",c=-w.offset.top+u.offset.top+u.scrollTop,d=i.y==="top"?o:i.y==="bottom"?-o:-o/2,e=k.y==="top"?q:k.y==="bottom"?-q:-q/2,f=A&&A.size?A.size.height||0:0,g=A&&A.corner&&A.corner.precedance==="y"&&!b?f:0,h=c-a+g,j=a+o-u.height-c+g,m=d-(i.precedance==="y"||i.x===i.y?e:0)-(k.y==="center"?q/2:0),n=i.y==="center";return b?(g=A&&A.corner&&A.corner.precedance==="x"?f:0,m=(i.y==="top"?1:-1)*d-g,v.top+=h>0?h:j>0?-j:0,v.top=Math.max(-w.offset.top+u.offset.top+(g&&A.corner.x==="center"?A.offset:0),a-m,Math.min(Math.max(-w.offset.top+u.offset.top+u.height,a+m),v.top))):(h>0&&(i.y!=="top"||j>0)?v.top-=m:j>0&&(i.y!=="bottom"||h>0)&&(v.top-=n?-m:m),v.top!==a&&n&&(v.top-=l.y),v.top<0&&-v.top>j&&(v.top=a)),v.top-a}},E;if(a.isArray(e)&&e.length===2)k={x:"left",y:"top"},v={left:e[0],top:e[1]};else if(e==="mouse"&&(b&&b.pageX||G.event.pageX))k={x:"left",y:"top"},b=(!b||b.type!=="resize"&&b.type!=="scroll"?b&&b.pageX&&b.type==="mousemove"?b:h&&h.pageX&&(l.mouse||!b||!b.pageX)?{pageX:h.pageX,pageY:h.pageY}:!l.mouse&&G.origin&&G.origin.pageX&&s.show.distance?G.origin:b:G.event)||b||G.event||h||{},v={top:b.pageY,left:b.pageX};else{e==="event"?b&&b.target&&b.type!=="scroll"&&b.type!=="resize"?e=G.target=a(b.target):e=G.target:e=G.target=a(e.jquery?e:F.target),e=a(e).eq(0);if(e.length===0)return y;e[0]===document||e[0]===window?(p=g.iOS?window.innerWidth:e.width(),q=g.iOS?window.innerHeight:e.height(),e[0]===window&&(v={top:(u||e).scrollTop(),left:(u||e).scrollLeft()})):e.is("area")&&g.imagemap?v=g.imagemap(e,k,C.enabled?m:c):e[0].namespaceURI==="http://www.w3.org/2000/svg"&&g.svg?v=g.svg(e,k):(p=e.outerWidth(),q=e.outerHeight(),v=g.offset(e,w)),v.offset&&(p=v.width,q=v.height,x=v.flipoffset,v=v.offset);if(g.iOS<4.1&&g.iOS>3.1||g.iOS==4.3||!g.iOS&&t)E=a(window),v.left-=E.scrollLeft(),v.top-=E.scrollTop();v.left+=k.x==="right"?p:k.x==="center"?p/2:0,v.top+=k.y==="bottom"?q:k.y==="center"?q/2:0}return v.left+=l.x+(i.x==="right"?-n:i.x==="center"?-n/2:0),v.top+=l.y+(i.y==="bottom"?-o:i.y==="center"?-o/2:0),C.enabled?(u={elem:u,height:u[(u[0]===window?"h":"outerH")+"eight"](),width:u[(u[0]===window?"w":"outerW")+"idth"](),scrollLeft:t?0:u.scrollLeft(),scrollTop:t?0:u.scrollTop(),offset:u.offset()||{left:0,top:0}},w={elem:w,scrollLeft:w.scrollLeft(),scrollTop:w.scrollTop(),offset:w.offset()||{left:0,top:0}},v.adjusted={left:C.horizontal!=="none"?C.left(v.left):0,top:C.vertical!=="none"?C.top(v.top):0},v.adjusted.left+v.adjusted.top&&D.attr("class",D[0].className.replace(/ui-tooltip-pos-\w+/i,j+"-pos-"+i.abbrev())),x&&v.adjusted.left&&(v.left+=x.left),x&&v.adjusted.top&&(v.top+=x.top)):v.adjusted={left:0,top:0},r.originalEvent=a.extend({},b),D.trigger(r,[y,v,u.elem||u]),r.isDefaultPrevented()?y:(delete v.adjusted,d===c||isNaN(v.left)||isNaN(v.top)||e==="mouse"||!a.isFunction(f.effect)?D.css(v):a.isFunction(f.effect)&&(f.effect.call(D,y,a.extend({},v)),D.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),B=0,y)},redraw:function(){if(y.rendered<1||C)return y;var a=s.position.container,b,c,d,e;return C=1,s.style.height&&D.css("height",s.style.height),s.style.width?D.css("width",s.style.width):(D.css("width","").addClass(q),c=D.width()+1,d=D.css("max-width")||"",e=D.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,D.css("width",Math.round(c)).removeClass(q)),C=0,y},disable:function(b){return"boolean"!=typeof b&&(b=!D.hasClass(l)&&!G.disabled),y.rendered?(D.toggleClass(l,b),a.attr(D[0],"aria-disabled",b)):G.disabled=!!b,y},enable:function(){return y.disable(c)},destroy:function(){var b=r[0],c=a.attr(b,t),d=r.data("qtip");y.rendered&&(D.stop(1,0).remove(),a.each(y.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(y.timers.show),clearTimeout(y.timers.hide),Q();if(!d||y===d)a.removeData(b,"qtip"),s.suppress&&c&&(a.attr(b,"title",c),r.removeAttr(t)),r.removeAttr("aria-describedby");return r.unbind(".qtip-"+v),delete i[y.id],r}})}function y(e,h){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(h.metadata):d,r=h.metadata.type==="html5"&&q?q[h.metadata.name]:d,s=n.data(h.metadata.name||"qtipopts");try{s=typeof s=="string"?(new Function("return "+s))():s}catch(u){v("Unable to parse HTML5 attribute data: "+s)}l=a.extend(b,{},f.defaults,h,typeof s=="object"?w(s):d,w(r||q)),j=l.position,l.id=e;if("boolean"==typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr===c||!k)return v("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n),c;l.content.text=k}j.container.length||(j.container=o),j.target===c&&(j.target=p),l.show.target===c&&(l.show.target=p),l.show.solo===b&&(l.show.solo=j.container.closest("body")),l.hide.target===c&&(l.hide.target=p),l.position.viewport===b&&(l.position.viewport=j.container),j.at=new g.Corner(j.at),j.my=new g.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===c)return c;return l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(t,m),i=new x(n,l,e,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+e+" removeqtip.qtip-"+e,function(){i.destroy()}),i}function z(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function A(f,h){function t(a,d,g,h){if(!k.tip)return;var l=i.corner.clone(),n=g.adjusted,o=f.options.position.adjust.method.split(" "),p=o[0],q=o[1]||o[0],r={left:c,top:c,x:0,y:0},s,t={},u;i.corner.fixed!==b&&(p==="shift"&&l.precedance==="x"&&n.left&&l.y!=="center"?l.precedance=l.precedance==="x"?"y":"x":p==="flip"&&n.left&&(l.x=l.x==="center"?n.left>0?"left":"right":l.x==="left"?"right":"left"),q==="shift"&&l.precedance==="y"&&n.top&&l.x!=="center"?l.precedance=l.precedance==="y"?"x":"y":q==="flip"&&n.top&&(l.y=l.y==="center"?n.top>0?"top":"bottom":l.y==="top"?"bottom":"top"),l.string()!==m.corner.string()&&(m.top!==n.top||m.left!==n.left)&&i.update(l,c)),s=i.position(l,n),s.right!==e&&(s.left=-s.right),s.bottom!==e&&(s.top=-s.bottom),s.user=Math.max(0,j.offset);if(r.left=p==="shift"&&!!n.left)l.x==="center"?t["margin-left"]=r.x=s["margin-left"]-n.left:(u=s.right!==e?[n.left,-s.left]:[-n.left,s.left],(r.x=Math.max(u[0],u[1]))>u[0]&&(g.left-=n.left,r.left=c),t[s.right!==e?"right":"left"]=r.x);if(r.top=q==="shift"&&!!n.top)l.y==="center"?t["margin-top"]=r.y=s["margin-top"]-n.top:(u=s.bottom!==e?[n.top,-s.top]:[-n.top,s.top],(r.y=Math.max(u[0],u[1]))>u[0]&&(g.top-=n.top,r.top=c),t[s.bottom!==e?"bottom":"top"]=r.y);k.tip.css(t).toggle(!(r.x&&r.y||l.x==="center"&&r.y||l.y==="center"&&r.x)),g.left-=s.left.charAt?s.user:p!=="shift"||r.top||!r.left&&!r.top?s.left:0,g.top-=s.top.charAt?s.user:q!=="shift"||r.left||!r.left&&!r.top?s.top:0,m.left=n.left,m.top=n.top,m.corner=l.clone()}function u(a,b,c){b=b?b:a[a.precedance];var d=l.hasClass(q),e=k.titlebar&&a.y==="top",f=e?k.titlebar:k.content,g="border-"+b+"-width",h;return l.addClass(q),h=parseInt(f.css(g),10),h=(c?h||parseInt(l.css(g),10):h)||0,l.toggleClass(q,d),h}function v(b){var c=k.titlebar&&b.y==="top",d=c?k.titlebar:k.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(l.css(h),10)||0}function w(a){var b=a.precedance==="y",c=n[b?"width":"height"],d=n[b?"height":"width"],e=a.string().indexOf("center")>-1,f=c*(e?.5:1),g=Math.pow,h=Math.round,i,j,k,l=Math.sqrt(g(f,2)+g(d,2)),m=[p/f*l,p/d*l];return m[2]=Math.sqrt(g(m[0],2)-g(p,2)),m[3]=Math.sqrt(g(m[1],2)-g(p,2)),i=l+m[2]+m[3]+(e?0:m[0]),j=i/l,k=[h(j*d),h(j*c)],{height:k[b?0:1],width:k[b?1:0]}}var i=this,j=f.options.style.tip,k=f.elements,l=k.tooltip,m={top:0,left:0},n={width:j.width,height:j.height},o={},p=j.border||0,r=".qtip-tip",s=!!(a("<canvas />")[0]||{}).getContext;i.corner=d,i.mimic=d,i.border=p,i.offset=j.offset,i.size=n,f.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||i.destroy(),f.reposition()},"^style.tip.(height|width)$":function(){n={width:j.width,height:j.height},i.create(),i.update(),f.reposition()},"^content.title.text|style.(classes|widget)$":function(){k.tip&&i.update()}},a.extend(i,{init:function(){var b=i.detectCorner()&&(s||a.browser.msie);return b&&(i.create(),i.update(),l.unbind(r).bind("tooltipmove"+r,t)),b},detectCorner:function(){var a=j.corner,d=f.options.position,e=d.at,h=d.my.string?d.my.string():d.my;return a===c||h===c&&e===c?c:(a===b?i.corner=new g.Corner(h):a.string||(i.corner=new g.Corner(a),i.corner.fixed=b),m.corner=new g.Corner(i.corner.string()),i.corner.string()!=="centercenter")},detectColours:function(b){var c,d,e,g=k.tip.css("cssText",""),h=b||i.corner,m=h[h.precedance],p="border-"+m+"-color",r="border"+m.charAt(0)+m.substr(1)+"Color",s=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,t="background-color",u="transparent",v=" !important",w=a(document.body).css("color"),x=f.elements.content.css("color"),y=k.titlebar&&(h.y==="top"||h.y==="center"&&g.position().top+n.height/2+j.offset<k.titlebar.outerHeight(1)),z=y?k.titlebar:k.content;l.addClass(q),o.fill=d=g.css(t),o.border=e=g[0].style[r]||g.css(p)||l.css(p);if(!d||s.test(d))o.fill=z.css(t)||u,s.test(o.fill)&&(o.fill=l.css(t)||d);if(!e||s.test(e)||e===w)o.border=z.css(p)||u,s.test(o.border)&&(o.border=e);a("*",g).add(g).css("cssText",t+":"+u+v+";border:0"+v+";"),l.removeClass(q)},create:function(){var b=n.width,c=n.height,d;k.tip&&k.tip.remove(),k.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:b,height:c}).prependTo(l),s?a("<canvas />").appendTo(k.tip)[0].getContext("2d").save():(d='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',k.tip.html(d+d),a("*",k.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(e,f){var h=k.tip,l=h.children(),q=n.width,r=n.height,t="px solid ",v="px dashed transparent",x=j.mimic,y=Math.round,A,B,C,D,E;e||(e=m.corner||i.corner),x===c?x=e:(x=new g.Corner(x),x.precedance=e.precedance,x.x==="inherit"?x.x=e.x:x.y==="inherit"?x.y=e.y:x.x===x.y&&(x[e.precedance]=e[e.precedance])),A=x.precedance,i.detectColours(e),o.border!=="transparent"&&o.border!=="#123456"?(p=u(e,d,b),j.border===0&&p>0&&(o.fill=o.border),i.border=p=j.border!==b?j.border:p):i.border=p=0,C=z(x,q,r),i.size=E=w(e),h.css(E),e.precedance==="y"?D=[y(x.x==="left"?p:x.x==="right"?E.width-q-p:(E.width-q)/2),y(x.y==="top"?E.height-r:0)]:D=[y(x.x==="left"?E.width-q:0),y(x.y==="top"?p:x.y==="bottom"?E.height-r-p:(E.height-r)/2)],s?(l.attr(E),B=l[0].getContext("2d"),B.restore(),B.save(),B.clearRect(0,0,3e3,3e3),B.translate(D[0],D[1]),B.beginPath(),B.moveTo(C[0][0],C[0][1]),B.lineTo(C[1][0],C[1][1]),B.lineTo(C[2][0],C[2][1]),B.closePath(),B.fillStyle=o.fill,B.strokeStyle=o.border,B.lineWidth=p*2,B.lineJoin="miter",B.miterLimit=100,p&&B.stroke(),B.fill()):(C="m"+C[0][0]+","+C[0][1]+" l"+C[1][0]+","+C[1][1]+" "+C[2][0]+","+C[2][1]+" xe",D[2]=p&&/^(r|b)/i.test(e.string())?parseFloat(a.browser.version,10)===8?2:1:0,l.css({antialias:""+(x.string().indexOf("center")>-1),left:D[0]-D[2]*Number(A==="x"),top:D[1]-D[2]*Number(A==="y"),width:q+p,height:r+p}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:q+p+" "+(r+p),path:C,fillcolor:o.fill,filled:!!b,stroked:!b}).css({display:p||b?"block":"none"}),!b&&c.html()===""&&c.html('<vml:stroke weight="'+p*2+'px" color="'+o.border+'" miterlimit="1000" joinstyle="miter" '+' style="behavior:url(#default#VML); display:inline-block;" />')})),f!==c&&i.position(e)},position:function(d){var e=k.tip,f={},g=Math.max(0,j.offset),h,l,m;return j.corner===c||!e?c:(d=d||i.corner,h=d.precedance,l=w(d),m=[d.x,d.y],h==="x"&&m.reverse(),a.each(m,function(a,c){var e,i;c==="center"?(e=h==="y"?"left":"top",f[e]="50%",f["margin-"+e]=-Math.round(l[h==="y"?"width":"height"]/2)+g):(e=u(d,c,b),i=v(d),f[c]=a?p?u(d,c):0:g+(i>e?i:0))}),f[d[h]]-=l[h==="x"?"width":"height"],e.css({top:"",bottom:"",left:"",right:"",margin:""}).css(f),f)},destroy:function(){k.tip&&k.tip.remove(),l.unbind(r)}}),i.init()}"use strict";var b=!0,c=!1,d=null,e,f,g,h,i={},j="ui-tooltip",k="ui-widget",l="ui-state-disabled",m="div.qtip."+j,n=j+"-default",o=j+"-focus",p=j+"-hover",q=j+"-fluid",r="-31000px",s="_replacedByqTip",t="oldtitle",u;f=a.fn.qtip=function(g,h,i){var j=(""+g).toLowerCase(),k=d,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):d;if(!arguments.length&&n||j==="api")return n;if("string"==typeof g)return this.each(function(){var d=a.data(this,"qtip");if(!d)return b;m&&m.timeStamp&&(d.cache.event=m);if(j!=="option"&&j!=="options"||!h)d[j]&&d[j].apply(d[j],l);else{if(!a.isPlainObject(h)&&i===e)return k=d.get(h),c;d.set(h,i)}}),k!==d?k:this;if("object"==typeof g||!arguments.length)return n=w(a.extend(b,{},g)),f.bind.call(this,n,m)},f.bind=function(d,j){return this.each(function(k){function r(b){function d(){p.render(typeof b=="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return c;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[e],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):d()}var l,m,n,o,p,q;q=a.isArray(d.id)?d.id[k]:d.id,q=!q||q===c||q.length<1||i[q]?f.nextid++:i[q]=q,o=".qtip-"+q+"-create",p=y.call(this,q,d);if(p===c)return b;l=p.options,a.each(g,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+o,function(a){h={pageX:a.pageX,pageY:a.pageY,type:"mousemove"},p.cache.onTarget=b}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(j)})},g=f.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(b,c){function j(a,b){d.left+=b*a.scrollLeft(),d.top+=b*a.scrollTop()}var d=b.offset(),e=b.closest("body")[0],f=c,g,h,i;if(f){do f.css("position")!=="static"&&(h=f.position(),d.left-=h.left+(parseInt(f.css("borderLeftWidth"),10)||0)+(parseInt(f.css("marginLeft"),10)||0),d.top-=h.top+(parseInt(f.css("borderTopWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0),!g&&(i=f.css("overflow"))!=="hidden"&&i!=="visible"&&(g=f));while((f=a(f[0].offsetParent)).length);g&&g[0]!==e&&j(g,1)}return d},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||c,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?a.attr(d,t):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c),this.attr(t,c))}return a.fn["attr"+s].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+s].apply(this,arguments);return b||e.filter("["+t+"]").attr("title",function(){return a.attr(this,t)}).removeAttr(t),e}}},a.each(g.fn,function(c,d){if(!d||a.fn[c+s])return b;var e=a.fn[c+s]=a.fn[c];a.fn[c]=function(){return d.apply(this,arguments)||e.apply(this,arguments)}}),a.ui||(a["cleanData"+s]=a.cleanData,a.cleanData=function(b){for(var c=0,d;(d=b[c])!==e;c++)try{a(d).triggerHandler("removeqtip")}catch(f){}a["cleanData"+s](b)}),f.version="nightly",f.nextid=0,f.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),f.zindex=15e3,f.defaults={prerender:c,id:c,overwrite:b,suppress:b,content:{text:b,attr:"title",title:{text:c,button:c}},position:{my:"top left",at:"bottom right",target:c,container:c,viewport:c,adjust:{x:0,y:0,mouse:b,resize:b,method:"flip flip"},effect:function(b,d,e){a(this).animate(d,{duration:200,queue:c})}},show:{target:c,event:"mouseenter",effect:b,delay:90,solo:c,ready:c,autofocus:c},hide:{target:c,event:"mouseleave",effect:b,delay:0,fixed:c,inactive:c,leave:"window",distance:c},style:{classes:"",widget:c,width:c,height:c,def:b},events:{render:d,move:d,show:d,hide:d,toggle:d,visible:d,focus:d,blur:d}},g.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new A(a)},g.tip.initialize="render",g.tip.sanitize=function(a){var c=a.style,d;c&&"tip"in c&&(d=a.style.tip,typeof d!="object"&&(a.style.tip={corner:d}),/string|boolean/i.test(typeof d.corner)||(d.corner=b),typeof d.width!="number"&&delete d.width,typeof d.height!="number"&&delete d.height,typeof d.border!="number"&&d.border!==b&&delete d.border,typeof d.offset!="number"&&delete d.offset)},a.extend(b,f.defaults,{style:{tip:{corner:b,mimic:c,width:6,height:6,border:b,offset:0}}})}),function(a){a.gritter={},a.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;typeof console!="undefined"&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})};var b={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-item"><div class="bg"></div>[[close]][[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){if(!c.title||!c.text)throw'You need to fill out the first 2 params: "title" and "text"';this._is_setup||this._runSetup();var d=c.title,e=c.text,f=c.image||"",g=c.sticky||!1,h=c.class_name||a.gritter.options.class_name,i=a.gritter.options.position,j=c.time||"";this._verifyWrapper(),this._item_count++;var k=this._item_count,l=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+k]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,j&&(this._custom_timer=j);var m=f!=""?'<img src="'+f+'" class="gritter-image" />':"",n=f!=""?"gritter-with-image":"gritter-without-image";l=this._str_replace(["[[username]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[d,e,this._tpl_close,m,this._item_count,n,h],l);if(this["_before_open_"+k]()===!1)return!1;a("#gritter-notice-wrapper").addClass(i).append(l);var o=a("#gritter-item-"+this._item_count);return o.fadeIn(this.fade_in_speed,function(){b["_after_open_"+k](a(this))}),g||this._setFadeTimer(o,k),a(o).bind("mouseenter mouseleave",function(c){c.type=="mouseenter"?g||b._restoreItemIfFading(a(this),k):g||b._setFadeTimer(a(this),k),b._hoverState(a(this),c.type)}),k},_countRemoveWrapper:function(b,c,d){c.remove(),this["_after_close_"+b](c,d),a(".gritter-item-wrapper").length==0&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){var d=d||{},f=typeof d.fade!="undefined"?d.fade:!0;fade_out_speed=d.speed||this.fade_out_speed,manual_close=e,this["_before_close_"+c](a,manual_close),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},fade_out_speed,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a,manual_close)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,c){c=="mouseenter"?(a.addClass("hover"),a.find(".gritter-close").show(),a.find(".gritter-close").click(function(){var c=a.attr("id").split("-")[2];b.removeSpecific(c,{},a,!0)})):(a.removeClass("hover"),a.find(".gritter-close").hide())},removeSpecific:function(b,c,d,e){if(!d)var d=a("#gritter-item-"+b);this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in a.gritter.options)this[opt]=a.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;m=[].concat(m),d&&(this.window[d]=0);for(e=0,i=m.length;e<i;e++){if(m[e]==="")continue;for(f=0,j=k.length;f<j;f++)g=m[e]+"",h=n?l[f]!==undefined?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length)}return o?m:m[0]},_verifyWrapper:function(){a("#gritter-notice-wrapper").length==0&&a("body").append(this._tpl_wrap)}}}(jQuery),jQuery.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){jQuery.timer.add(this,a,b,c,d)})},oneTime:function(a,b,c){return this.each(function(){jQuery.timer.add(this,a,b,c,1)})},stopTime:function(a,b){return this.each(function(){jQuery.timer.remove(this,a,b)})}}),jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(a){if(a==undefined||a==null)return null;var b=this
.regex.exec(jQuery.trim(a.toString()));if(b[2]){var c=parseFloat(b[1]),d=this.powers[b[2]]||1;return c*d}return a},add:function(a,b,c,d,e){var f=0;jQuery.isFunction(c)&&(e||(e=d),d=c,c=b),b=jQuery.timer.timeParse(b);if(typeof b!="number"||isNaN(b)||b<0)return;if(typeof e!="number"||isNaN(e)||e<0)e=0;e=e||0;var g=jQuery.data(a,this.dataKey)||jQuery.data(a,this.dataKey,{});g[c]||(g[c]={}),d.timerID=d.timerID||this.guid++;var h=function(){(++f>e&&e!==0||d.call(a,f)===!1)&&jQuery.timer.remove(a,c,d)};h.timerID=d.timerID,g[c][d.timerID]||(g[c][d.timerID]=window.setInterval(h,b)),this.global.push(a)},remove:function(a,b,c){var d=jQuery.data(a,this.dataKey),e;if(d){if(!b)for(b in d)this.remove(a,b,c);else if(d[b]){if(c)c.timerID&&(window.clearInterval(d[b][c.timerID]),delete d[b][c.timerID]);else for(var c in d[b])window.clearInterval(d[b][c]),delete d[b][c];for(e in d[b])break;e||(e=null,delete d[b])}for(e in d)break;e||jQuery.removeData(a,this.dataKey)}}}}),jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(a,b){jQuery.timer.remove(b)})});